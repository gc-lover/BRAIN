# GAP-АНАЛИЗ .BRAIN — 2025-11-08

**Статус:** draft  
**Версия:** 0.1.0  
**Дата:** 2025-11-07 21:32  
**Ответственный:** AI Brain Manager

**api-readiness:** not-applicable  
**api-readiness-check-date:** 2025-11-07 21:32  
**api-readiness-notes:** Аналитический отчёт о пробелах контента для планирования дальнейших работ. Не предназначен для постановки API задач напрямую.

---

## Резюме

- У геймплейного блока сохранены открытые вопросы по продвинутой стрельбе, формализации социальных заказов и «детальных» версиям социальных систем (`needs-work`).
- Технический пласт не закрыт по архитектурным артефактам MVP: отсутствуют описания схем БД и миграций, не подготовлены API контракты для продвинутых боевых и мировых механик, нет UI-спецификаций для ряда модулей.
- Нарратив требует масштабной детализации: основной сюжет и ветки квестов остаются на уровне outline, большинство ключевых NPC и квестов отмечены блоками «Добавить детали/диалоги/ветвления».

---

## Методика анализа

- Индексные файлы: `.BRAIN/ARCHITECTURE.md`, `02-gameplay/README.md`, `05-technical/README.md`, `04-narrative/README.md`.
- Трекинг активностей: `.BRAIN/06-tasks/active/CURRENT-WORK/current-status.md`, `open-questions.md`.
- Поиск по статусам `needs-work` и ключевым TODO через `grep` по разделам `02-gameplay`, `05-technical`, `04-narrative`.

---

## Геймплей — пробелы и риски

### Combat / Gameplay-service
- `02-gameplay/combat/combat-shooting-advanced.md` — документ в статусе `needs-work`; нет оформленных REST/Kafka контрактов и сценариев синхронизации с `economy-service` и `world-service`, отсутствуют payload-примеры и API-тесты.
- Не зафиксированы требования к поведению NPC и AI для Curved Shot/Ricochet (влияние на PvE/PvP балансы не расписано).

### Social / Social-service
- Серия «детальных» документов по заказам игроков (`player-orders-*-детально.md`), найму NPC и наставничеству остаётся в статусе `needs-work`: нет формул расчёта наград/репутации, ограничения не описаны численно, нет связки с экономика-сервисом.
- Базовый документ `player-orders-creation.md` содержит неразрешённую задачу по авто-оценке вознаграждения (формулы сложности/риска/дистанции не описаны).
- Для семейных и отношений (`family-relationships-system-детально.md`, `relationships-system-детально.md`) не определены каскадные эффекты и таблицы для расчёта влияния на мир.

### Economy & Progression / Economy-service
- Несмотря на серию новых файлов, остаются незакрытыми блоки в `economy-analytics.md`, `economy-crafting.md`, `economy-world-impact.md` — нет формул, коэффициентов и описаний монетизации контента, требуются матрицы баланса.
- `progression/classes-abilities.md` хранит незаполненные описания способностей классов; нет связи с системой перков и проверками D&D.

### World / World-service
- В `world-bosses-catalog.md` и связанных событиях отсутствуют параметры масштабирования под разный онлайн (нет таблиц для динамической сложности, расписаний ротаций).
- Недостаточно связки между мировыми событиями и социальными индексами: отсутствует документ, который бы увязывал данные `city-life-population-algorithm.md` (тоже `needs-work`) с метриками World Pulse.

---

## Технические пробелы (Backend / Frontend)

### Backend (Java, Postgres, инфраструктура)
- В `05-technical/README.md` помечены незаполненные артефакты MVP: отсутствуют `database/schema.md`, `database/migrations.md`, `architecture/mvp-backend-architecture.md`.
- `content-generation/city-life-population-algorithm.md` — статус `needs-work`; нет расчётных формул распределения NPC, не определены входные данные и пороги обновления.
- Продвинутый боевой пакет (`combat-shooting-advanced.md`) не сопровождается схемами DTO и разделом «Swagger/API todo» без конкретики по ресурсам, что блокирует генерацию OpenAPI.
- Нет ER-диаграммы/DDL для систем заказов и социального резонанса, хотя механики описаны в геймплейных документах.

### Frontend (React, модули и UI Kits)
- Не создан файл `ui-mvp-screens.md`, упомянутый в `05-technical/README.md`; отсутствует целостный список MVP-экранов с компонентами `shared/ui`.
- Для уникальных стартов (`game-start-by-*.md`) нет UI-потоков и экранов: требуется согласование с модулем `modules/onboarding` и описанием проверок.
- Отсутствует документ, увязывающий World Pulse/Influence Map (описаны в `2025-11-07-world-interaction-ui.md`) с фактической компонентной структурой и маршрутизацией в `FRONT-WEB` (нет ссылок на `src/features/...`).
- Не определены стратегии состояния/RTK Query кэширования для социальных систем (player orders, mentorship) — отсутствует техническая заметка по фронтенду.

---

## Нарратив, квесты и сценарии

### Основной сюжет и кампании
- `04-narrative/quests/main-quests-outline.md` — сохранены блоки «Создать детальные описания/ветвления/контрольные точки»; отсутствуют JSON/таблицы ветвлений для передачи в quest engine.
- Нет готового `QUEST-TEMPLATE.md`, поэтому новые квесты оформляются без единых полей (риск несогласованности задач для API Task Creator).

### NPC и фракции
- Большинство файлов в `04-narrative/npc-lore/important/` содержат секции «Добавить детали/диалоги/события»; нет таблиц связей NPC ↔ квесты ↔ фракции.
- `npc-lore/important-npcs-list.md` фиксирует TODO по созданию историй для каждого ключевого NPC; отсутствует список приоритетов (кому уделить внимание в первую очередь для MVP).
- `03-lore/visual-guides/*.md` остаются в `needs-work`, поэтому визуальные ориентиры для окружения и UI пока не готовы для художников/фронтенда.

### Сценарии и события
- В `04-narrative/scenarios/` отсутствует общая карта сценариев, нет связки с календарём событий и механикой «анномалий» (активные обсуждения 2025-11-07 пока не отражены в дереве сценариев).
- Не хватает описаний проверок D&D и DC для квестов вне основного outline (только в общих документах, без детализации по каждому квесту).

---

## Рекомендуемые следующие шаги

1. **Combat & Social API** — подготовить пакет API задач по `combat-shooting-advanced.md` и социальным заказам, включая DTO, примеры payload и требования к микросервисам.
2. **MVP Backend Artefacts** — создать `database/schema.md`, `database/migrations.md`, `architecture/mvp-backend-architecture.md` с акцентом на квестовый движок, социальные системы и экономику.
3. **Frontend UX пакеты** — оформить `ui-mvp-screens.md` и технические нотсы по RTK Query/стейт-менеджменту для player orders, mentorship и world dashboards.
4. **Quest Detailing** — разработать `QUEST-TEMPLATE.md` и детализировать основные ветки (`main-quests-outline.md`) с DC, условиями и интеграцией с world-state.
5. **NPC & Visual Guides** — приоритизировать список NPC и визуальных гайд-файлов в `needs-work`, зафиксировать минимальные требования для MVP (история, диалоги, квестовые триггеры, арт-референсы).

---

## Контрольный список закрытия

- [x] Проанализированы индексные и статусные документы.
- [x] Проверены статусы `needs-work` и открытые TODO в геймплее, технике, нарративе.
- [x] Зафиксированы рекомендации и указаны конкретные файлы для доработки.



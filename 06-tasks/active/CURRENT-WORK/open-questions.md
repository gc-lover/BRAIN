# Открытые вопросы для проработки

**Последнее обновление:** 2025-11-06 20:31

---

## ⚡ СРОЧНО: Структура БД для ветвления квестов

### В работе:
- [x] **Анализ текущего состояния системы квестов** - ✅ **Завершено (2025-11-06)**
  - Детальный анализ в `CURRENT-WORK/active/2025-11-06-quest-branching-database-design.md`
  - ER-диаграмма в `CURRENT-WORK/active/2025-11-06-quest-branching-er-diagram.md`

### Требуется решение:

#### 1. Валидация структуры БД
- [ ] Обсудить предложенную структуру с backend разработчиками
- [ ] Оценить влияние на производительность (load testing)
- [ ] Проверить совместимость с текущим API
- [ ] Оценить сложность миграции

#### 2. Партиционирование и масштабирование
- [ ] Определить стратегию партиционирования для больших таблиц
  - `player_quest_choices` - monthly partitions?
  - `world_state_history` - monthly partitions?
- [ ] Определить retention policy для исторических данных
- [ ] Определить стратегию шардирования для multi-server setup

#### 3. Кэширование
- [ ] Какие данные кэшировать в Redis?
  - Dialogue trees (полное дерево квеста)?
  - World state (глобальное состояние)?
  - Player flags (индивидуальные флаги)?
- [ ] Определить TTL для кэшей
- [ ] Определить стратегию инвалидации кэша

#### 4. Синхронизация мирового состояния (MMORPG)
- [ ] Как синхронизировать world_state между серверами?
- [ ] Как обрабатывать конфликты при одновременном изменении?
- [ ] Как обеспечить консистентность данных?
- [ ] Использовать распределенные транзакции или eventual consistency?

#### 5. Производительность квестовых запросов
- [ ] Оптимизировать запросы для получения диалоговых деревьев
- [ ] Оптимизировать проверку условий (flags, reputation)
- [ ] Определить, нужна ли денормализация для READ-heavy операций
- [ ] Протестировать производительность на 1000+ одновременных игроков

#### 6. Миграция данных
- [ ] Определить порядок миграции существующих квестов
- [ ] Создать скрипты для конвертации JSON-квестов в новую структуру
- [ ] Определить стратегию обратной совместимости
- [ ] Определить rollback план

#### 7. API Endpoints
- [ ] Определить новые API endpoints для работы с ветвлениями
- [ ] Обновить существующие endpoints
- [ ] Создать API для получения истории выборов
- [ ] Создать API для получения world state

#### 8. Аналитика и мониторинг
- [ ] Какие метрики собирать для анализа популярности путей?
- [ ] Как отслеживать bottlenecks в квестах?
- [ ] Какие дашборды нужны для Game Designers?
- [ ] Как мониторить влияние квестов на world state?

#### 9. Тестирование
- [ ] Определить стратегию тестирования ветвлений
- [ ] Как тестировать все возможные пути квеста?
- [ ] Как тестировать последствия для мирового состояния?
- [ ] Автоматизация тестирования квестов

#### 10. Документация
- [ ] Создать гайды для Content Creators
- [ ] Создать примеры создания квестов с ветвлениями
- [ ] Документировать best practices
- [ ] Создать инструменты для визуализации dialogue trees

**Связанные документы:**
- `CURRENT-WORK/active/2025-11-06-quest-branching-database-design.md`
- `CURRENT-WORK/active/2025-11-06-quest-branching-er-diagram.md`
- `04-narrative/quest-system.md`
- `04-narrative/quests/BRANCHING-QUESTS-SUMMARY.md`

---

## Боевая система

### ✅ Решено (первый брейншторм завершён):
- [x] Тип боевой системы и стиль стрельбы - **Решено:** MMORPG как основа + аркадная стрельба с элементами реализма (см. `combat-shooting.md`)
- [x] TTK (Time To Kill) - **Решено:** Зависит от зоны/режима + влияние развития персонажа (см. `combat-shooting.md`)
- [x] Система способностей (источники, типы, ограничения) - **Решено:** VALORANT структура + все источники (экипировка/импланты/прокачка) + комбинации (см. `combat-abilities.md`)
- [x] Типы хакерства и логика сетей - **Решено:** Все типы доступны, структура сетей зависит от типа (см. `combat-hacking.md`)
- [x] Киберпространство (тип, игровой процесс) - **Решено:** Детально проработано в `combat-hacking.md` и связанных файлах
- [x] Импланты (ограничения, киберпсихоз) - **Решено:** Базовые ограничения определены, киберпсихоз проработан (см. `combat-implants.md`)
- [x] Экстрактшутер: типы лута/редкость/источники/сложность - **Решено:** Детально проработано (см. `combat-extract.md`)
- [x] Паркур: интеграция с боем - **Решено:** Детально проработано (см. `combat-freerun.md`)
- [x] Стелс: система обнаружения - **Решено:** Детально проработано (см. `combat-stealth.md`)

### Отложено на детальную проработку:
- [x] Детали киберпсихоза (симптомы, прогрессия, управление) - ✅ **Завершено (v1.1.0)** - см. `combat-cyberpsychosis.md`
- [x] Детали экстрактшутера (время в зоне, сложность зон, динамическая сложность) - ✅ **Завершено (v1.3.0)** - см. `combat-extract.md`

**Связанные документы:** `02-gameplay/combat/`

---

## Система прокачки

### Отложено на детальную проработку:
- [x] Система перков (как работают, ограничения) - ✅ **Завершено (v1.0.0)** - см. `progression-perks.md`
- [x] Перерождения (нужны ли, как работают) - ✅ **Завершено (v1.0.0)** - см. `progression-rebirth.md`

**Связанные документы:** `02-gameplay/progression/classes-overview.md`

---

## Экономическая система

### TODO для дальнейшей проработки:
- [ ] Балансировка всех аспектов экономической системы
- [ ] Детальная проработка монетизации контента (ближе к релизу)
- [ ] Проработка инструментов для создания контента

**Связанные документы:** `02-gameplay/economy/economy-overview.md`

---

## Социальные механики

### TODO для дальнейшей проработки:
- [ ] Создание авторских социальных структур (банды, корпорации, организации, академии) для каждого континента и страны
- [ ] Балансировка всех механик социальных структур и взаимодействий

**Связанные документы:** `02-gameplay/social/`

---

## Новые темы для первого брейншторма

- [ ] Повествование (04-narrative/) - первый брейншторм
- [ ] Технические задания (05-technical/) - первый брейншторм


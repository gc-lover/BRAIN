# Брейншторм: Время в зоне и динамическая сложность экстрактшутера

**Статус:** resolved  
**Приоритет:** Высокий  
**Дата создания:** 2025-11-03  
**Связанный документ:** `02-gameplay/combat/combat-extract.md`

---

## Контекст

Документ `combat-extract.md` содержит базовые решения по экстрактшутеру, но есть отложенные детали:
- **Время в зоне:** Варианты определены, но решение отложено на детальную проработку
- **Сложность зон:** Базовая система есть, но динамическая сложность не детализирована
- **TODO:** Определить время в зоне (лимиты времени)

**Требуется:** Детализировать систему времени в зоне и динамическую сложность для создания API.

**Источники вдохновения:**
- TARKOV - лимит времени на рейде
- Hunt: Showdown - динамическая сложность
- The Cycle: Frontier - временные зоны и сложность
- MMORPG механики - динамическая сложность контента

**Интеграция:**
- `combat-extract.md` - основная система экстрактшутера
- `combat-pvp-pve.md` - сложность AI и зон
- `economy-trading.md` - влияние на экономику
- `equipment-matrix.md` - влияние на редкость лута

---

## Вопрос 1: Время в зоне (лимиты времени)

**Контекст:** Нужно определить, есть ли лимит времени нахождения в экстракт-зоне, как он работает и как влияет на игровой процесс.

**✅ Решение:** Вариант Г - Полная система времени (переменный лимит + динамические изменения + штрафы)

**Детализация:**
- **Базовый лимит:** Зависит от типа зоны
  - Легкие зоны (low risk): 45-60 минут
  - Средние зоны (medium risk): 30-45 минут
  - Сложные зоны (high risk): 15-30 минут
  - Экстремальные зоны (extreme risk): 10-20 минут

- **Динамические изменения:**
  - События могут изменять лимит (глобальные/фракционные события → ±10-15 минут)
  - Действия игроков влияют на время (взлом систем → +5 минут, массовые убийства → -5 минут)
  - Фракционный контроль влияет на лимит (контроль зоны своей фракцией → +10 минут для членов)

- **Штрафы за превышение:**
  - Превышение лимита 0-5 минут: увеличенный риск (больше врагов на 25%, меньше шанс на редкий лут на 10%)
  - Превышение лимита 5-10 минут: высокий риск (больше врагов на 50%, меньше шанс на редкий лут на 25%)
  - Превышение лимита >10 минут: критический риск (массовые волны врагов, форсированная экстракция через 2 минуты или смерть)

- **Визуальные индикаторы:**
  - Таймер с цветовой индикацией (зеленый → желтый → красный)
  - Предупреждения при 75%, 50%, 25%, 10% оставшегося времени
  - Критические предупреждения при превышении лимита

- **Тактическая глубина:**
  - Выбор между рискованным длительным пребыванием и быстрой экстракцией
  - Стратегия: дольше = больше лута, но выше риск
  - Интеграция с `combat-extract.md` (влияние времени на редкость лута)

**Дополнительные решения:**
1. ✅ Да, игроки видят оставшееся время (таймер с индикаторами)
2. ✅ Да, игроки могут продлевать время через действия/предметы (взломы, специальные предметы)
3. ✅ Да, время в зоне влияет на редкость лута (дольше = выше шанс редкого лута, но больше риск)

**Статус:** Решено

**Варианты:**

**Вариант А: Нет лимита времени (можно оставаться сколько угодно)**
- Игроки могут оставаться в зоне сколько угодно
- Просто реализовать
- Нет давления времени, меньше напряжения
- *Пример:* Упрощенная система

**Вариант Б: Фиксированный лимит времени (одинаковый для всех зон)**
- Единый лимит времени для всех экстракт-зон (например, 30 минут)
- Просто реализовать и балансировать
- Предсказуемо, но может быть скучно
- *Пример:* Простая система

**Вариант В: Переменный лимит (зависит от зоны/события)**
- Разные зоны имеют разные лимиты времени (легкие = дольше, сложные = меньше)
- События могут изменять лимит времени
- Больше разнообразия и тактики
- *Пример:* Гибкая система

**Вариант Г: Полная система времени (переменный лимит + динамические изменения + штрафы)**
- **Базовый лимит:** Зависит от типа зоны (легкие = 45-60 минут, средние = 30-45 минут, сложные = 15-30 минут)
- **Динамические изменения:** 
  - События могут изменять лимит (увеличивать/уменьшать)
  - Действия игроков влияют на время (взлом систем может увеличить время)
  - Фракционный контроль влияет на лимит
- **Штрафы за превышение:**
  - Превышение лимита = увеличенный риск (больше врагов, меньше шанс на редкий лут)
  - Критическое превышение = форсированная экстракция или смерть
- **Визуальные индикаторы:** Предупреждения о приближении лимита, обратный отсчет
- **Тактическая глубина:** Выбор между рискованным длительным пребыванием и быстрой экстракцией

**Рекомендация:** Вариант Г (полная система) - максимум тактической глубины и напряжения

**Дополнительные вопросы:**
1. Должны ли игроки видеть оставшееся время (таймер)?
2. Могут ли игроки продлевать время через действия/предметы?
3. Влияет ли время в зоне на редкость лута (дольше = реже лут)?

---

## Вопрос 2: Динамическая сложность зон

**Контекст:** Нужно определить, как изменяется сложность зон со временем и действиями игроков, влияет ли это на редкость лута и игровой процесс.

**✅ Решение:** Вариант Г - Полная динамическая система (время + действия + события + фракции)

**Детализация:**
- **Время в зоне:**
  - Базовое увеличение сложности каждые 10 минут (+10% к сложности)
  - Волны врагов каждые 15-20 минут (увеличение количества и силы врагов)
  - События появляются через определенные интервалы (динамические угрозы)

- **Действия игроков:**
  - Убийства боссов → увеличение сложности на 20% (но +50% к шансу редкого лута)
  - Взлом систем → временное увеличение сложности на 15% (но открывает новые зоны/лут)
  - Массовые убийства (5+ убийств за 5 минут) → эскалация (больше врагов на 30%, но больше лута)
  - Выполнение задач → временное увеличение сложности на 10% (но +30% к шансу редкого лута)

- **События:**
  - Глобальные события изменяют сложность зон (±20% к сложности)
  - Фракционные события создают временные бонусы/штрафы сложности (±15%)
  - Лиги влияют на базовую сложность зон (поздние стадии лиги → +25% к базовой сложности)

- **Фракционный контроль:**
  - Контроль зоны своей фракцией → снижение сложности на 15% для членов фракции, увеличение на 15% для врагов
  - Клановые войны → временное увеличение сложности на 25% в зоне конфликта

- **Влияние на редкость лута:**
  - Больше сложность = выше шанс редкого лута (линейная зависимость: +10% сложности = +5% к шансу редкого лута)
  - Влияние времени (дольше = выше сложность → реже лут, но выше риск)
  - Влияние действий (убийства боссов, взломы → повышают шанс редкого лута)
  - Интеграция с `equipment-matrix.md` (динамическая сложность влияет на веса редкости `rarityWeightsByZone`)

- **Визуальные индикаторы:**
  - Индикатор сложности зоны (1-5 звезд или проценты)
  - Предупреждения об эскалации сложности (визуальные/звуковые сигналы)
  - Индикатор влияния действий на сложность

**Дополнительные решения:**
1. ✅ Да, игроки видят текущую сложность зоны (индикатор с визуальным представлением)
2. ✅ Да, игроки могут снижать сложность через действия/предметы (взломы систем безопасности, использование специальных предметов)
3. ✅ Да, динамическая сложность связана с системой лиг (`economy-world-impact.md`) - поздние стадии лиги повышают базовую сложность зон

**Статус:** Решено

**Варианты:**

**Вариант А: Статическая сложность (сложность не меняется)**
- Сложность зоны фиксирована при входе
- Просто реализовать
- Нет динамики и разнообразия

**Вариант Б: Сложность меняется по времени (волны сложности)**
- Сложность увеличивается со временем (волны врагов, события)
- Больше напряжения и динамики
- Предсказуемо после нескольких прохождений

**Вариант В: Сложность зависит от действий игроков**
- Действия игроков влияют на сложность (убийства боссов, взломы увеличивают сложность)
- Динамичная и непредсказуемая система
- Игроки могут контролировать сложность

**Вариант Г: Полная динамическая система (время + действия + события + фракции)**
- **Время в зоне:** Сложность постепенно увеличивается со временем (волны врагов, события)
- **Действия игроков:**
  - Убийства боссов → увеличение сложности (но больше редкого лута)
  - Взлом систем → временное увеличение сложности (но открывает новые зоны/лут)
  - Массовые убийства → эскалация (больше врагов, но больше лута)
- **События:**
  - Глобальные события изменяют сложность зон
  - Фракционные события создают временные бонусы/штрафы сложности
  - Лиги влияют на базовую сложность зон
- **Фракционный контроль:**
  - Контроль зоны фракцией → снижение сложности для членов фракции, увеличение для врагов
  - Клановые войны → временное увеличение сложности
- **Влияние на редкость лута:**
  - Больше сложность = выше шанс редкого лута (но больше риск)
  - Влияние времени (дольше = реже лут, но выше риск)
  - Влияние действий (выполнение задач, убийства боссов → повышают шанс редкого лута)
- **Интеграция с `equipment-matrix.md`:** Динамическая сложность влияет на веса редкости (`rarityWeightsByZone`)

**Рекомендация:** Вариант Г (полная динамическая система) - максимум глубины и разнообразия

**Дополнительные вопросы:**
1. Должны ли игроки видеть текущую сложность зоны (индикатор)?
2. Могут ли игроки снижать сложность через действия/предметы?
3. Как динамическая сложность связана с системой лиг (`economy-world-impact.md`)?

---

## Вопрос 3: Интеграция времени и сложности

**Контекст:** Нужно определить, как время в зоне связано с динамической сложностью и как это влияет на стратегию игроков.

**✅ Решение:** Вариант Г - Полная интеграция (взаимное влияние + тактические решения)

**Детализация:**
- **Время влияет на сложность:**
  - Дольше в зоне → постепенное увеличение сложности (+10% каждые 10 минут)
  - Превышение лимита → критическое увеличение сложности (+50% при превышении 5 минут, +100% при превышении 10 минут)
  - Волны врагов появляются чаще при приближении к лимиту

- **Сложность влияет на доступное время:**
  - Выше сложность → меньше оставшееся время (штрафы: +20% сложности = -5 минут к лимиту)
  - Критическая сложность (200%+) → форсированная экстракция через 2 минуты
  - Высокая сложность → ускоренное увеличение штрафов за превышение лимита

- **Тактические решения:**
  - Игроки должны балансировать время, сложность и редкость лута
  - Рискованные действия (убийства боссов, взломы) → увеличение сложности и времени, но больше редкого лута
  - Быстрая экстракция → низкий риск, но меньше лута
  - Долгое пребывание → высокий риск, но больше редкого лута
  - Стратегия: оптимальное время зависит от цели (быстрый лут vs редкий лут)

- **Визуальные индикаторы:**
  - Таймер времени с цветовой индикацией (зеленый → желтый → красный)
  - Индикатор сложности зоны с визуальным представлением (1-5 звезд или проценты)
  - Предупреждения об эскалации сложности и приближении к лимиту времени
  - Индикатор влияния действий на сложность (временные эффекты)

- **Интеграция с системами:**
  - `combat-extract.md` - основная система экстрактшутера
  - `combat-pvp-pve.md` - сложность AI и зон
  - `equipment-matrix.md` - влияние на редкость лута (`rarityWeightsByZone`)
  - `economy-world-impact.md` - влияние лиг на сложность

**Дополнительные решения:**
1. ✅ Да, игроки видят предупреждения об увеличении сложности (визуальные/звуковые сигналы)
2. ✅ Да, игроки могут контролировать эскалацию сложности через стратегию (быстрые действия → меньше времени → меньше сложность)
3. ✅ Да, время и сложность связаны с системой страховки/восстановления лута (выше риск → выше стоимость страховки)

**Статус:** Решено

**Варианты:**

**Вариант А: Время и сложность независимы**
- Время и сложность не связаны друг с другом
- Просто реализовать
- Меньше тактической глубины

**Вариант Б: Время влияет на сложность (линейная зависимость)**
- Чем дольше в зоне, тем выше сложность
- Предсказуемо и логично
- Создает давление времени

**Вариант В: Сложность влияет на время (обратная зависимость)**
- Выше сложность = меньше доступное время
- Создает стратегический выбор (риск vs время)
- Интересная механика

**Вариант Г: Полная интеграция (взаимное влияние + тактические решения)**
- **Время влияет на сложность:**
  - Дольше в зоне → постепенное увеличение сложности (волны врагов, события)
  - Превышение лимита → критическое увеличение сложности
- **Сложность влияет на доступное время:**
  - Выше сложность → меньше оставшееся время (штрафы за превышение)
  - Критическая сложность → форсированная экстракция
- **Тактические решения:**
  - Игроки должны балансировать время, сложность и редкость лута
  - Рискованные действия (убийства боссов, взломы) → увеличение сложности и времени, но больше редкого лута
  - Быстрая экстракция → низкий риск, но меньше лута
  - Долгое пребывание → высокий риск, но больше редкого лута
- **Визуальные индикаторы:**
  - Таймер времени с предупреждениями
  - Индикатор сложности зоны
  - Предупреждения об эскалации сложности

**Рекомендация:** Вариант Г (полная интеграция) - максимум тактической глубины и стратегических решений

**Дополнительные вопросы:**
1. Должны ли игроки видеть предупреждения об увеличении сложности?
2. Могут ли игроки контролировать эскалацию сложности через стратегию?
3. Как время и сложность связаны с системой страховки/восстановления лута?

---

## Следующие шаги

После получения решений:
1. Обновить `combat-extract.md` с детальными решениями по времени и динамической сложности
2. Интегрировать решения с существующими системами (PvP/PvE, экономика, лиги)
3. Обновить статус документа с отложенных TODO на детализированные решения
4. Обновить статус документа с `review` на готовность к API после детализации

---

## История изменений

- v1.0.0 (2025-11-03) - Создан файл для брейншторма времени в зоне и динамической сложности
- v1.1.0 (2025-11-03) - Приняты решения по всем 3 вопросам
  - ✅ Вопрос 1: Время в зоне - Вариант Г (полная система: переменный лимит + динамические изменения + штрафы)
  - ✅ Вопрос 2: Динамическая сложность зон - Вариант Г (полная динамическая система: время + действия + события + фракции)
  - ✅ Вопрос 3: Интеграция времени и сложности - Вариант Г (полная интеграция: взаимное влияние + тактические решения)


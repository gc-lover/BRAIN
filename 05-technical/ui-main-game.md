# Основной игровой интерфейс (текстовая версия)

**Статус:** review - детализация завершена  
**Версия:** 1.1.0  
**Дата создания:** 2025-11-04  
**Последнее обновление:** 2025-11-04  
**Приоритет:** высокий

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-04 16:30  
**api-readiness-notes:** Документ готов к созданию API задач. Содержит детальные описания всех интерфейсов для текстовой версии, решения по вопросам интерфейса (гибридные варианты), полное описание API endpoints с request/response схемами для всех систем (персонаж, локации, инвентарь, квесты, NPC, бой, торговля). Все необходимые детали для создания API спецификации присутствуют (v1.1.0).

---

## Общее описание

Описание основного игрового интерфейса для текстовой веб-версии NECPGAME, который заменяет полноценный 3D мир системой меню и текстовых интерфейсов.

**Важно:** Это текстовый интерфейс без графики и 3D-моделей, который представляет MMORPG мир через систему меню, текстовых описаний и действий.

---

## 1. Главный экран / Хаб персонажа

### 1.1. Главное меню игры

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     NECPGAME - Night City               │
│     [Текущее время: 2077-03-15 14:30]   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ПЕРСОНАЖ                         │   │
│  │ Имя: Джон Доу                   │   │
│  │ Класс: Соло | Уровень: 5        │   │
│  │ Здоровье: ████████░░ 80%         │   │
│  │ Энергия: ███████░░░ 70%         │   │
│  │ Человечность: ██████░░░░ 60%    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ЛОКАЦИЯ                          │   │
│  │ Night City - Downtown            │   │
│  │ Район: Корпоративный центр       │   │
│  │ Опасность: Низкая                │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Действия] [Инвентарь] [Характеристики]│
│  [Квесты] [Карта] [Социальное]         │
│  [Торговля] [Настройки] [Выход]         │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Отображение статуса персонажа (здоровье, энергия, человечность)
- Отображение текущей локации с описанием
- Быстрый доступ к основным функциям
- Индикатор игрового времени

**Элементы:**
- Статус персонажа (здоровье, энергия, человечность, уровень)
- Текущая локация (город, район, опасность)
- Меню действий (доступные действия в текущей локации)
- Навигация по разделам игры

---

### 1.2. Текстовое описание локации

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     Night City - Downtown              │
│                                         │
│  Вы стоите в центре корпоративного      │
│  района. Вокруг вас возвышаются         │
│  небоскребы корпораций, неоновые        │
│  вывески мигают на стенах зданий.       │
│  На улице проходят люди, некоторые      │
│  с заметными имплантами.                │
│                                         │
│  [Осмотреть] [Поговорить с NPC]        │
│  [Переместиться] [Действия]             │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Текстовое описание текущей локации
- Атмосферное описание окружения
- Доступные действия в локации
- Список NPC в локации
- Выходы в другие локации

---

## 2. Меню действий

### 2.1. Действия в локации

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ДОСТУПНЫЕ ДЕЙСТВИЯ                  │
│                                         │
│  [Осмотреть окружение]                  │
│  [Поговорить с NPC]                     │
│  [Использовать объект]                  │
│  [Отдохнуть]                            │
│  [Хакнуть систему]                       │
│  [Вступить в бой]                       │
│                                         │
│  [Назад]                                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Список доступных действий в текущей локации
- Действия зависят от локации, класса персонажа, навыков
- Каждое действие ведет к соответствующему интерфейсу

---

### 2.2. Взаимодействие с NPC

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     NPC: Торговец                        │
│                                         │
│  [Портрет NPC или описание]             │
│                                         │
│  "Привет, чомбата. Что тебе нужно?"     │
│                                         │
│  [Купить] [Продать] [Квесты]            │
│  [Поговорить] [Уйти]                    │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Текстовое описание NPC
- Диалоги с NPC
- Опции взаимодействия (торговля, квесты, разговоры)
- Репутация с NPC/фракцией

---

## 3. Инвентарь и экипировка

### 3.1. Инвентарь

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ИНВЕНТАРЬ                            │
│                                         │
│  Экипировка:                             │
│  [Голова] [Тело] [Руки] [Ноги]         │
│  [Оружие 1] [Оружие 2] [Импланты]      │
│                                         │
│  Предметы:                               │
│  ┌─────────────────────────────────┐   │
│  │ [Оружие] [Броня] [Импланты]     │   │
│  │ [Ресурсы] [Медикаменты]         │   │
│  │ [Квестовые предметы]             │   │
│  └─────────────────────────────────┘   │
│                                         │
│  Вес: 45/100 кг                          │
│                                         │
│  [Использовать] [Экипировать] [Выбросить]│
│  [Назад]                                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Список экипированных предметов
- Список предметов в инвентаре
- Сортировка по категориям
- Индикатор веса/лимита
- Действия с предметами (использовать, экипировать, выбросить)

---

### 3.2. Характеристики персонажа

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ХАРАКТЕРИСТИКИ                      │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Основные характеристики:         │   │
│  │ Сила: 15                         │   │
│  │ Ловкость: 12                     │   │
│  │ Интеллект: 18                    │   │
│  │ Техника: 14                      │   │
│  │ Холоднокровие: 10                │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Навыки:                          │   │
│  │ Стрельба: 35/100                 │   │
│  │ Хакерство: 20/100                │   │
│  │ Переговоры: 15/100               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Перки] [Импланты] [Назад]             │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Основные характеристики (сила, ловкость, интеллект, техника, холоднокровие)
- Навыки с прогрессом
- Перки и таланты
- Импланты и модификации
- Детальная информация о каждом параметре

---

## 4. Навигация и карта

### 4.1. Карта города

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     КАРТА NIGHT CITY                   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ [Downtown] [Watson] [Westbrook] │   │
│  │ [Santo Domingo] [Pacifica]      │   │
│  │ [Heywood] [Badlands]            │   │
│  └─────────────────────────────────┘   │
│                                         │
│  Текущая локация: Downtown              │
│                                         │
│  [Выбрать локацию для перемещения]      │
│  [Назад]                                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Список доступных районов/зон города
- Текстовое описание каждой локации
- Выбор локации для перемещения
- Информация о доступности локаций (уровень, опасность, требования)

---

### 4.2. Перемещение между локациями

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ПЕРЕМЕЩЕНИЕ                         │
│                                         │
│  Откуда: Downtown                       │
│  Куда: Watson                            │
│                                         │
│  Время в пути: 15 минут                 │
│  Опасность: Средняя                     │
│  Стоимость: 50 eddies (опционально)    │
│                                         │
│  [Переместиться] [Отмена]               │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Выбор локации для перемещения
- Информация о времени в пути
- Информация об опасности маршрута
- Опциональная стоимость перемещения
- Подтверждение перемещения

---

## 5. Квесты и задания

### 5.1. Список квестов

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     КВЕСТЫ                              │
│                                         │
│  Активные квесты:                       │
│  ┌─────────────────────────────────┐   │
│  │ [1] Найти торговца               │   │
│  │     Прогресс: 1/3 шага           │   │
│  │     [Детали] [Отследить]         │   │
│  └─────────────────────────────────┘   │
│                                         │
│  Доступные квесты:                      │
│  ┌─────────────────────────────────┐   │
│  │ [2] Доставка груза               │   │
│  │     Награда: 500 eddies          │   │
│  │     [Принять] [Детали]           │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Ежедневные] [Фракционные] [Назад]    │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Список активных квестов с прогрессом
- Список доступных квестов
- Детали каждого квеста
- Принятие/отказ от квестов
- Фильтрация квестов (ежедневные, фракционные, основные)

---

### 5.2. Детали квеста

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     КВЕСТ: Найти торговца               │
│                                         │
│  Описание:                              │
│  Вам нужно найти торговца Джейка,       │
│  который должен быть в районе          │
│  Watson. Поговорите с ним о поставке.  │
│                                         │
│  Прогресс: 1/3 шага                     │
│  - [✓] Принять квест                    │
│  - [ ] Найти торговца                   │
│  - [ ] Поговорить с торговцем           │
│                                         │
│  Награды:                               │
│  - 500 eddies                           │
│  - 200 XP                               │
│  - Репутация с Valentinos: +5           │
│                                         │
│  [Отследить] [Отменить] [Назад]         │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Полное описание квеста
- Прогресс выполнения
- Список наград
- Действия с квестом (отследить, отменить)

---

## 6. Бой (текстовая версия)

### 6.1. Интерфейс боя

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     БОЙ                                 │
│                                         │
│  Противник: Бандит                     │
│  Здоровье: ████████░░ 80%              │
│                                         │
│  Ваше здоровье: ██████████ 100%         │
│  Ваша энергия: ███████░░░ 70%           │
│                                         │
│  [Атака] [Способность] [Защита]        │
│  [Хакерство] [Стелс] [Бегство]         │
│                                         │
│  [Инвентарь] [Назад]                    │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Текстовое описание противника
- Статус здоровья и энергии
- Доступные действия в бою
- Логи боя (текстовое описание действий)
- Использование способностей и предметов

---

### 6.2. Логи боя

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ЛОГ БОЯ                             │
│                                         │
│  [2025-11-04 14:30]                     │
│  Вы атакуете бандита из пистолета.      │
│  Урон: 45                               │
│                                         │
│  [2025-11-04 14:30]                     │
│  Бандит атакует вас ножом.              │
│  Урон: 20                               │
│                                         │
│  [2025-11-04 14:31]                     │
│  Вы используете способность "Быстрый    │
│  выстрел". Урон: 60                     │
│                                         │
│  [2025-11-04 14:31]                     │
│  Бандит повержен!                       │
│  Получено: 100 XP, 50 eddies            │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Текстовое описание каждого действия в бою
- Урон и эффекты
- Результаты боя
- Награды за победу

---

## 7. Социальные функции

### 7.1. Список друзей/контактов

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     КОНТАКТЫ                             │
│                                         │
│  [Друзья] [Клан] [Фракция] [NPC]       │
│                                         │
│  Друзья:                                │
│  ┌─────────────────────────────────┐   │
│  │ Джейн Смит (онлайн)             │   │
│  │ [Написать] [Профиль]           │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Боб Доу (офлайн, 2 часа назад)  │   │
│  │ [Написать] [Профиль]           │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Добавить друга] [Назад]              │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Список друзей с статусом (онлайн/офлайн)
- Быстрый доступ к чату
- Профили игроков
- Добавление/удаление друзей

---

### 7.2. Чат

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ЧАТ                                 │
│                                         │
│  [Общий] [Клан] [Фракция] [Приват]    │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ [14:25] Джейн: Привет!          │   │
│  │ [14:26] Боб: Есть квест?        │   │
│  │ [14:27] Вы: Ищу команду для     │   │
│  │          рейда                   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Введите сообщение...]                │
│  [Отправить] [Назад]                   │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Каналы чата (общий, клан, фракция, приват)
- История сообщений
- Ввод и отправка сообщений
- Фильтрация и модерация

---

### 7.3. Клан

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     КЛАН: Shadows                      │
│                                         │
│  Участники: 15/50                       │
│  Ранг: Участник                         │
│                                         │
│  [Участники] [Войны] [Ресурсы]         │
│  [Квесты] [Чат] [Настройки]            │
│                                         │
│  [Назад]                                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Информация о клане
- Список участников
- Клановые войны и события
- Клановые ресурсы
- Клановые квесты
- Управление кланом (для лидеров)

---

## 8. Торговля и магазины

### 8.1. Магазин NPC

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     МАГАЗИН: Торговец Джейк            │
│                                         │
│  Ваши деньги: 500 eddies                │
│                                         │
│  [Купить] [Продать]                     │
│                                         │
│  Доступные товары:                       │
│  ┌─────────────────────────────────┐   │
│  │ Пистолет "Liberty"              │   │
│  │ Цена: 200 eddies                │   │
│  │ [Купить] [Детали]               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Броня "Street"                   │   │
│  │ Цена: 150 eddies                │   │
│  │ [Купить] [Детали]               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Назад]                                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Список доступных товаров
- Цены и характеристики
- Покупка предметов
- Продажа предметов из инвентаря
- Репутация влияет на цены

---

### 8.2. Аукционный дом / Рынок

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     РЫНОК                               │
│                                         │
│  [Купить] [Продать] [Мои лоты]          │
│                                         │
│  Поиск: [_________________]            │
│  Фильтры: [Категория] [Цена] [Редкость]│
│                                         │
│  Товары:                                │
│  ┌─────────────────────────────────┐   │
│  │ Пистолет "Liberty"              │   │
│  │ Продавец: Джейн Смит            │   │
│  │ Цена: 250 eddies                │   │
│  │ Время: 2 часа                   │   │
│  │ [Купить] [Детали]               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Назад]                                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Поиск товаров
- Фильтрация по категориям, цене, редкости
- Покупка у других игроков
- Размещение своих товаров на продажу
- Управление своими лотами

---

## 9. Настройки и профиль

### 9.1. Настройки игры

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     НАСТРОЙКИ                           │
│                                         │
│  [Интерфейс] [Игра] [Звук] [Уведомления]│
│                                         │
│  Интерфейс:                              │
│  ☐ Показывать подсказки                 │
│  ☐ Компактный режим                     │
│  ☐ Автосохранение                       │
│                                         │
│  Игра:                                   │
│  ☐ Автоматический бой                   │
│  ☐ Подтверждение действий               │
│                                         │
│  [Сохранить] [Сброс] [Назад]            │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Настройки интерфейса
- Настройки игрового процесса
- Настройки звука и уведомлений
- Сохранение настроек

---

### 9.2. Профиль персонажа

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ПРОФИЛЬ: Джон Доу                  │
│                                         │
│  Класс: Соло | Уровень: 5               │
│  Фракция: Независимый                   │
│  Город: Night City                      │
│                                         │
│  Статистика:                            │
│  - Игровое время: 15 часов              │
│  - Убийств: 23                          │
│  - Квестов выполнено: 12               │
│  - Репутация: Разная по фракциям       │
│                                         │
│  [Достижения] [История] [Назад]        │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Информация о персонаже
- Статистика игрока
- Достижения
- История действий

---

## 10. Технические требования

### 10.1. Структура интерфейса

**Основные принципы:**
- Модульная структура - каждое меню отдельный компонент
- Навигация через меню - замена 3D мира системой меню
- Текстовые описания - атмосферные описания локаций и действий
- Контекстные действия - действия зависят от текущей ситуации

---

### 10.2. API требования

#### 10.2.1. Главный экран / Статус персонажа

**Endpoints:**

**GET /api/v1/characters/{characterId}/status**
- Описание: Получение статуса персонажа (здоровье, энергия, человечность, уровень, опыт)
- Response:
  ```json
  {
    "characterId": "uuid",
    "name": "string",
    "level": "integer",
    "experience": "integer",
    "health": {
      "current": "integer",
      "max": "integer",
      "percentage": "integer"
    },
    "energy": {
      "current": "integer",
      "max": "integer",
      "percentage": "integer"
    },
    "humanity": {
      "current": "integer",
      "max": "integer",
      "percentage": "integer"
    }
  }
  ```

**GET /api/v1/characters/{characterId}/stats**
- Описание: Получение характеристик персонажа
- Response:
  ```json
  {
    "characterId": "uuid",
    "attributes": {
      "strength": "integer",
      "reflexes": "integer",
      "intelligence": "integer",
      "technical": "integer",
      "cool": "integer"
    },
    "skills": [
      {
        "name": "string",
        "level": "integer",
        "maxLevel": "integer"
      }
    ]
  }
  ```

---

#### 10.2.2. Локации

**Endpoints:**

**GET /api/v1/locations/current**
- Описание: Получение текущей локации персонажа
- Response:
  ```json
  {
    "locationId": "uuid",
    "name": "string",
    "description": "string",
    "city": "string",
    "district": "string",
    "dangerLevel": "low|medium|high|extreme",
    "connectedLocations": ["uuid"],
    "npcs": ["uuid"],
    "availableActions": ["string"]
  }
  ```

**GET /api/v1/locations/{locationId}**
- Описание: Получение информации о локации
- Response: аналогично GET /api/v1/locations/current

**GET /api/v1/locations/{locationId}/actions**
- Описание: Получение доступных действий в локации
- Response:
  ```json
  {
    "locationId": "uuid",
    "actions": [
      {
        "id": "string",
        "name": "string",
        "description": "string",
        "type": "explore|talk|use|rest|hack|combat",
        "available": "boolean",
        "requirements": {
          "level": "integer",
          "skills": ["string"],
          "items": ["uuid"]
        }
      }
    ]
  }
  ```

**GET /api/v1/locations/{locationId}/npcs**
- Описание: Получение списка NPC в локации
- Response:
  ```json
  {
    "locationId": "uuid",
    "npcs": [
      {
        "id": "uuid",
        "name": "string",
        "description": "string",
        "faction": "string",
        "type": "trader|quest_giver|guard|citizen",
        "availableQuests": ["uuid"]
      }
    ]
  }
  ```

**POST /api/v1/locations/move**
- Описание: Перемещение персонажа между локациями
- Request:
  ```json
  {
    "characterId": "uuid",
    "targetLocationId": "uuid"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "newLocationId": "uuid",
    "travelTime": "integer",
    "message": "string"
  }
  ```

**GET /api/v1/locations**
- Описание: Получение списка доступных локаций (для карты)
- Query Parameters:
  - `city` (optional): фильтр по городу
  - `district` (optional): фильтр по району
  - `dangerLevel` (optional): фильтр по опасности
  - `minLevel` (optional): минимальный уровень
- Response:
  ```json
  {
    "locations": [
      {
        "id": "uuid",
        "name": "string",
        "city": "string",
        "district": "string",
        "dangerLevel": "string",
        "minLevel": "integer",
        "available": "boolean"
      }
    ]
  }
  ```

---

#### 10.2.3. Инвентарь

**Endpoints:**

**GET /api/v1/inventory/{characterId}**
- Описание: Получение инвентаря персонажа
- Response:
  ```json
  {
    "characterId": "uuid",
    "weight": {
      "current": "integer",
      "max": "integer"
    },
    "equipped": {
      "head": "uuid|null",
      "body": "uuid|null",
      "arms": "uuid|null",
      "legs": "uuid|null",
      "weapon1": "uuid|null",
      "weapon2": "uuid|null",
      "implants": ["uuid"]
    },
    "items": [
      {
        "id": "uuid",
        "itemId": "uuid",
        "name": "string",
        "type": "weapon|armor|implant|consumable|resource|quest",
        "quantity": "integer",
        "equipped": "boolean",
        "slot": "string|null"
      }
    ]
  }
  ```

**POST /api/v1/inventory/{characterId}/equip**
- Описание: Экипировка предмета
- Request:
  ```json
  {
    "inventoryItemId": "uuid",
    "slot": "head|body|arms|legs|weapon1|weapon2"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "message": "string"
  }
  ```

**POST /api/v1/inventory/{characterId}/unequip**
- Описание: Снятие предмета
- Request:
  ```json
  {
    "inventoryItemId": "uuid"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "message": "string"
  }
  ```

**POST /api/v1/inventory/{characterId}/use**
- Описание: Использование предмета
- Request:
  ```json
  {
    "inventoryItemId": "uuid"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "effects": {
      "health": "integer",
      "energy": "integer"
    },
    "message": "string"
  }
  ```

---

#### 10.2.4. Квесты

**Endpoints:**

**GET /api/v1/quests/{characterId}**
- Описание: Получение списка квестов персонажа
- Query Parameters:
  - `status` (optional): active|completed|available
  - `type` (optional): main|side|daily|weekly|faction
- Response:
  ```json
  {
    "characterId": "uuid",
    "activeQuests": [
      {
        "id": "uuid",
        "name": "string",
        "description": "string",
        "type": "string",
        "progress": {
          "current": "integer",
          "total": "integer"
        },
        "objectives": [
          {
            "id": "string",
            "description": "string",
            "completed": "boolean"
          }
        ],
        "rewards": {
          "experience": "integer",
          "money": "integer",
          "items": ["uuid"],
          "reputation": {
            "faction": "string",
            "amount": "integer"
          }
        }
      }
    ],
    "availableQuests": [
      {
        "id": "uuid",
        "name": "string",
        "description": "string",
        "type": "string",
        "giverNpcId": "uuid",
        "rewards": {
          "experience": "integer",
          "money": "integer"
        },
        "requirements": {
          "level": "integer",
          "reputation": {
            "faction": "string",
            "minValue": "integer"
          }
        }
      }
    ]
  }
  ```

**GET /api/v1/quests/{questId}**
- Описание: Получение детальной информации о квесте
- Response:
  ```json
  {
    "id": "uuid",
    "name": "string",
    "description": "string",
    "type": "string",
    "giverNpcId": "uuid",
    "progress": {
      "current": "integer",
      "total": "integer"
    },
    "objectives": [
      {
        "id": "string",
        "description": "string",
        "completed": "boolean",
        "target": {
          "type": "location|npc|item|kill",
          "id": "uuid|string"
        }
      }
    ],
    "rewards": {
      "experience": "integer",
      "money": "integer",
      "items": ["uuid"],
      "reputation": {
        "faction": "string",
        "amount": "integer"
      }
    },
    "status": "active|completed|available"
  }
  ```

**POST /api/v1/quests/{questId}/accept**
- Описание: Принятие квеста
- Request:
  ```json
  {
    "characterId": "uuid"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "message": "string"
  }
  ```

**POST /api/v1/quests/{questId}/complete**
- Описание: Завершение квеста
- Request:
  ```json
  {
    "characterId": "uuid"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "rewards": {
      "experience": "integer",
      "money": "integer",
      "items": ["uuid"],
      "reputation": {
        "faction": "string",
        "amount": "integer"
      }
    },
    "message": "string"
  }
  ```

**POST /api/v1/quests/{questId}/abandon**
- Описание: Отказ от квеста
- Request:
  ```json
  {
    "characterId": "uuid"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "message": "string"
  }
  ```

---

#### 10.2.5. NPC и взаимодействие

**Endpoints:**

**GET /api/v1/npcs/{npcId}**
- Описание: Получение информации о NPC
- Response:
  ```json
  {
    "id": "uuid",
    "name": "string",
    "description": "string",
    "locationId": "uuid",
    "faction": "string",
    "type": "trader|quest_giver|guard|citizen",
    "reputation": {
      "faction": "string",
      "value": "integer"
    },
    "availableQuests": ["uuid"],
    "tradeAvailable": "boolean"
  }
  ```

**GET /api/v1/npcs/{npcId}/dialogue**
- Описание: Получение диалогов с NPC
- Response:
  ```json
  {
    "npcId": "uuid",
    "greeting": "string",
    "dialogueOptions": [
      {
        "id": "string",
        "text": "string",
        "requirements": {
          "reputation": {
            "faction": "string",
            "minValue": "integer"
          },
          "quests": ["uuid"]
        }
      }
    ]
  }
  ```

**POST /api/v1/npcs/{npcId}/interact**
- Описание: Взаимодействие с NPC
- Request:
  ```json
  {
    "characterId": "uuid",
    "action": "talk|trade|quest|leave",
    "dialogueOptionId": "string|null"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "response": "string",
    "tradeData": "object|null",
    "questData": "object|null"
  }
  ```

---

#### 10.2.6. Бой (текстовая версия)

**Endpoints:**

**POST /api/v1/combat/start**
- Описание: Начало боя
- Request:
  ```json
  {
    "characterId": "uuid",
    "enemyId": "uuid",
    "locationId": "uuid"
  }
  ```
- Response:
  ```json
  {
    "combatId": "uuid",
    "character": {
      "health": {
        "current": "integer",
        "max": "integer"
      },
      "energy": {
        "current": "integer",
        "max": "integer"
      }
    },
    "enemy": {
      "id": "uuid",
      "name": "string",
      "health": {
        "current": "integer",
        "max": "integer"
      },
      "description": "string"
    },
    "turn": "player|enemy",
    "availableActions": ["attack|defend|ability|item|escape"]
  }
  ```

**GET /api/v1/combat/{combatId}/status**
- Описание: Получение статуса боя
- Response:
  ```json
  {
    "combatId": "uuid",
    "character": {
      "health": {
        "current": "integer",
        "max": "integer"
      },
      "energy": {
        "current": "integer",
        "max": "integer"
      }
    },
    "enemy": {
      "id": "uuid",
      "name": "string",
      "health": {
        "current": "integer",
        "max": "integer"
      }
    },
    "turn": "player|enemy",
    "availableActions": ["string"],
    "combatLog": [
      {
        "timestamp": "datetime",
        "actor": "player|enemy",
        "action": "string",
        "description": "string",
        "damage": "integer|null",
        "effects": ["string"]
      }
    ]
  }
  ```

**POST /api/v1/combat/{combatId}/action**
- Описание: Выполнение действия в бою
- Request:
  ```json
  {
    "action": "attack|defend|ability|item|escape",
    "target": "enemy|self",
    "abilityId": "uuid|null",
    "itemId": "uuid|null"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "turn": "player|enemy",
    "actionResult": {
      "actor": "player|enemy",
      "action": "string",
      "description": "string",
      "damage": "integer|null",
      "effects": ["string"]
    },
    "character": {
      "health": {
        "current": "integer",
        "max": "integer"
      },
      "energy": {
        "current": "integer",
        "max": "integer"
      }
    },
    "enemy": {
      "health": {
        "current": "integer",
        "max": "integer"
      }
    },
    "combatEnded": "boolean",
    "victory": "boolean|null",
    "rewards": {
      "experience": "integer",
      "money": "integer",
      "items": ["uuid"]
    }|null
  }
  ```

**POST /api/v1/combat/{combatId}/end**
- Описание: Завершение боя (побег или завершение)
- Request:
  ```json
  {
    "reason": "escape|victory|defeat"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "message": "string"
  }
  ```

---

#### 10.2.7. Торговля (опционально для MVP)

**Endpoints:**

**GET /api/v1/trade/shops/{npcId}**
- Описание: Получение товаров у торговца
- Response:
  ```json
  {
    "npcId": "uuid",
    "shopName": "string",
    "items": [
      {
        "id": "uuid",
        "name": "string",
        "type": "string",
        "price": "integer",
        "quantity": "integer",
        "description": "string"
      }
    ],
    "reputationDiscount": "integer"
  }
  ```

**POST /api/v1/trade/buy**
- Описание: Покупка предмета
- Request:
  ```json
  {
    "characterId": "uuid",
    "npcId": "uuid",
    "itemId": "uuid",
    "quantity": "integer"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "message": "string",
    "remainingMoney": "integer"
  }
  ```

**POST /api/v1/trade/sell**
- Описание: Продажа предмета
- Request:
  ```json
  {
    "characterId": "uuid",
    "npcId": "uuid",
    "inventoryItemId": "uuid",
    "quantity": "integer"
  }
  ```
- Response:
  ```json
  {
    "success": "boolean",
    "message": "string",
    "moneyReceived": "integer",
    "newMoney": "integer"
  }
  ```

---

#### 10.2.8. Обработка ошибок

**Стандартные коды ошибок:**
- `400 Bad Request` - некорректный запрос
- `401 Unauthorized` - не авторизован
- `403 Forbidden` - нет доступа
- `404 Not Found` - ресурс не найден
- `409 Conflict` - конфликт (например, квест уже принят)
- `500 Internal Server Error` - внутренняя ошибка сервера

**Формат ошибки:**
```json
{
  "error": {
    "code": "string",
    "message": "string",
    "details": "object|null"
  }
}
```

---

## 11. Решения по вопросам интерфейса

### Q1: Структура главного экрана

**Решение: Гибридный экран (C) с элементами информативного (B)**

**Реализация:**
- Основная информация всегда видна (статус персонажа, текущая локация)
- Текстовое описание локации отображается по умолчанию
- Дополнительные секции (активные квесты, уведомления) сворачиваются/разворачиваются
- Настройка отображения элементов через настройки
- Пресеты интерфейса (компактный, информативный, минималистичный)

**Преимущества:**
- Баланс между информативностью и простотой
- Гибкость для разных стилей игры
- Возможность настройки под себя

---

### Q2: Навигация по локациям

**Решение: Гибридная система (D) с иерархической структурой**

**Реализация:**
- Иерархическая структура: Город → Район → Зона → Локация
- Текстовое описание каждой локации при выборе
- Список доступных локаций с фильтрацией (по уровню, опасности, типу)
- Визуализация связей между локациями (текстовый список связанных локаций)
- Быстрый доступ к часто посещаемым локациям

**Преимущества:**
- Логичная структура навигации
- Легко масштабируется для добавления новых локаций
- Гибкость в отображении (можно показывать только доступные локации)

---

### Q3: Текстовый бой

**Решение: Гибридная система (D) - пошаговый бой с текстовыми описаниями**

**Реализация:**
- Пошаговый бой: ход игрока → ход противника
- Выбор действия каждый ход (атака, защита, способность, предмет, побег)
- Детальные текстовые описания каждого действия
- Логи боя с временными метками
- Опциональная автоматизация простых действий (для ускорения)

**Преимущества:**
- Полный контроль игрока над боем
- Атмосферные текстовые описания
- Возможность ускорения для простых боев
- Гибкость для разных стилей боя

---

### Q4: Информационная насыщенность

**Решение: Настраиваемая информация (C) с умными пресетами**

**Реализация:**
- Игрок выбирает что показывать через настройки
- Пресеты интерфейса:
  - **Компактный** - минимальная информация, максимум места для действий
  - **Информативный** - вся информация, максимум данных
  - **Сбалансированный** - оптимальный баланс (по умолчанию)
  - **Комбат** - фокус на боевых данных (здоровье, энергия, способности)
  - **Торговец** - фокус на экономике (деньги, инвентарь, цены)
  - **Хакер** - фокус на технических данных (киберпространство, хакерство)
- Динамическое скрытие/показ элементов в зависимости от контекста

**Преимущества:**
- Максимальная гибкость для разных стилей игры
- Адаптивность под текущую ситуацию
- Персонализация интерфейса

---

## 12. Связанные документы

- [UI/UX принципы](../01-concepts/design-philosophy-ui-ux.md) - общие принципы дизайна
- [Начальный интерфейс](./ui-character-creation.md) - создание персонажа
- [Система квестов](../04-narrative/quest-system.md) - детали квестов
- [Боевая система](../02-gameplay/combat/combat-overview.md) - детали боевой системы
- [Социальные механики](../02-gameplay/social/relationships-system.md) - детали социальных механик

---

## История изменений

- v1.1.0 (2025-11-04) - Детализация интерфейсов, решения по вопросам (гибридные варианты), добавлены детальные API endpoints для всех систем
- v1.0.0 (2025-11-04) - Создание документа с описанием основного игрового интерфейса для текстовой версии





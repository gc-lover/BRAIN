# Начальный интерфейс: выбор и создание персонажа

**Статус:** review - детализация завершена  
**Версия:** 1.1.0  
**Дата создания:** 2025-11-03  
**Последнее обновление:** 2025-11-04  
**Приоритет:** высокий

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-04 00:01  
**api-readiness-notes:** Документ готов к созданию API задач. Содержит детальные модели данных (Account, Character, CharacterSummary, CharacterClass, CharacterOrigin, Faction, City), полное описание API endpoints с параметрами, валидацией и обработкой ошибок (аутентификация, персонажи, справочные данные). Все необходимые детали для создания API спецификации присутствуют (v1.1.0).

---

## Общее описание

Описание начального интерфейса для текстовой веб-версии NECPGAME, включающий:
- Экран входа/регистрации
- Экран выбора персонажа
- Экран создания персонажа
- Начальный экран игры

**Важно:** Это текстовый интерфейс без графики и 3D-моделей, так как пока не подключен движок и используется веб-интерфейс.

---

## 1. Экран входа/регистрации

### 1.1. Экран входа

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│          NECPGAME                       │
│     [Киберпанк стилистика]              │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Логин: [_________________]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Пароль: [_________________]    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Войти]  [Регистрация]  [Восстановить] │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Поле для ввода логина (email или username)
- Поле для ввода пароля (скрытое)
- Кнопка "Войти" - переход в игру
- Кнопка "Регистрация" - переход на экран регистрации
- Кнопка "Восстановить пароль" - восстановление доступа

**Валидация:**
- Проверка заполненности полей
- Проверка формата логина
- Отображение ошибок входа

---

### 1.2. Экран регистрации

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│          РЕГИСТРАЦИЯ                    │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Email: [_________________]      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Логин: [_________________]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Пароль: [_________________]    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Повтор пароля: [_____________] │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ☐ Согласен с условиями использования   │
│                                         │
│  [Зарегистрироваться]  [Назад]         │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Поле для ввода email (обязательно)
- Поле для ввода логина (обязательно, уникальность)
- Поле для ввода пароля (обязательно, минимум символов)
- Поле для подтверждения пароля
- Чекбокс согласия с условиями
- Кнопка "Зарегистрироваться" - создание аккаунта
- Кнопка "Назад" - возврат на экран входа

**Валидация:**
- Проверка формата email
- Проверка уникальности логина
- Проверка сложности пароля
- Проверка совпадения паролей
- Проверка согласия с условиями

---

## 2. Экран выбора персонажа

### 2.1. Список персонажей

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ВЫБОР ПЕРСОНАЖА                     │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ [Персонаж 1]                    │   │
│  │ Имя: Джон Доу                   │   │
│  │ Класс: Нетраннер                │   │
│  │ Уровень: 5                      │   │
│  │ Фракция: Arasaka                │   │
│  │ Город: Night City               │   │
│  │ Последний вход: 2 часа назад    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ [Персонаж 2]                    │   │
│  │ Имя: Джейн Смит                 │   │
│  │ Класс: Соло                     │   │
│  │ Уровень: 12                     │   │
│  │ Фракция: Valentinos            │   │
│  │ Город: Los Angeles              │   │
│  │ Последний вход: 1 день назад    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Создать нового персонажа]            │
│  [Удалить персонажа]  [Войти в игру]   │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Список существующих персонажей игрока
- Для каждого персонажа отображается:
  - Имя персонажа
  - Класс
  - Уровень
  - Фракция
  - Город
  - Последний вход в игру
- Выбор персонажа (клик или выделение)
- Кнопка "Создать нового персонажа" - переход на экран создания
- Кнопка "Удалить персонажа" - удаление выбранного персонажа (с подтверждением)
- Кнопка "Войти в игру" - запуск игры с выбранным персонажем

**Ограничения:**
- Максимальное количество персонажей на аккаунт (например, 3-5)
- Удаление персонажа требует подтверждения

---

### 2.2. Пустой список персонажей

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ВЫБОР ПЕРСОНАЖА                     │
│                                         │
│     У вас пока нет персонажей           │
│                                         │
│     Создайте первого персонажа,        │
│     чтобы начать игру                   │
│                                         │
│     [Создать персонажа]                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Сообщение об отсутствии персонажей
- Кнопка "Создать персонажа" - переход на экран создания

---

## 3. Экран создания персонажа

### 3.1. Общая структура

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     СОЗДАНИЕ ПЕРСОНАЖА                  │
│                                         │
│  [Шаг 1: Основная информация]           │
│  [Шаг 2: Класс и билд]                 │
│  [Шаг 3: Внешность]                    │
│  [Шаг 4: Происхождение]                │
│  [Шаг 5: Фракция]                      │
│  [Шаг 6: Стартовая локация]            │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  │   [Контент текущего шага]       │   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Назад]  [Далее]  [Отмена]            │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Многошаговый процесс создания персонажа
- Отображение текущего шага
- Навигация между шагами (Назад/Далее)
- Кнопка "Отмена" - возврат на экран выбора персонажа

---

### 3.2. Шаг 1: Основная информация

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│  Шаг 1: Основная информация            │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Имя персонажа: [_____________]  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  Имя будет отображаться другим игрокам │
│  (3-20 символов, буквы, цифры, пробелы) │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Пол:                             │   │
│  │  ○ Мужской                       │   │
│  │  ○ Женский                       │   │
│  │  ○ Другое                        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Назад]  [Далее]                      │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Поле для ввода имени персонажа
- Выбор пола (Мужской/Женский/Другое)
- Валидация имени (длина, допустимые символы)
- Кнопка "Далее" - переход к следующему шагу

---

### 3.3. Шаг 2: Класс и билд

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│  Шаг 2: Класс и билд                    │
│                                         │
│  Выберите класс персонажа:               │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Соло (Solo)                   │   │
│  │   Боевой класс, специализация    │   │
│  │   на боевых навыках              │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Нетраннер (Netrunner)         │   │
│  │   Хакерский класс, специализация │   │
│  │   на взломе и киберпространстве  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Техник (Tech)                 │   │
│  │   Технический класс, специализ. │   │
│  │   на технике и имплантах         │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Детали классов]                      │
│                                         │
│  [Назад]  [Далее]                      │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Выбор класса персонажа (радио-кнопки)
- Краткое описание каждого класса
- Кнопка "Детали классов" - подробное описание классов
- Кнопка "Далее" - переход к следующему шагу

**Примечание:** Детали классов и билдов будут доступны через отдельный экран или модальное окно.

---

### 3.4. Шаг 3: Внешность

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│  Шаг 3: Внешность                       │
│                                         │
│  ⚠ Текстовый режим - без 3D модели     │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Рост: [___] см                   │   │
│  │ (150-220 см)                     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Телосложение:                   │   │
│  │  ○ Худощавое                    │   │
│  │  ○ Обычное                      │   │
│  │  ○ Мускулистое                  │   │
│  │  ○ Крупное                      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Цвет волос: [Выбрать цвет]      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Цвет глаз: [Выбрать цвет]       │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Цвет кожи: [Выбрать цвет]       │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Особые приметы:                 │   │
│  │  [Текстовое описание]            │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Назад]  [Далее]                      │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Настройка физических параметров персонажа
- Рост (числовое поле)
- Телосложение (радио-кнопки)
- Цвет волос (выбор из палитры или текстовое описание)
- Цвет глаз (выбор из палитры или текстовое описание)
- Цвет кожи (выбор из палитры или текстовое описание)
- Особые приметы (текстовое поле для описания)
- Кнопка "Далее" - переход к следующему шагу

**Примечание:** В текстовом режиме используются текстовые описания и выборы из списков, без визуального отображения модели.

---

### 3.5. Шаг 4: Происхождение

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│  Шаг 4: Происхождение                   │
│                                         │
│  Выберите происхождение персонажа:      │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Уличный бродяга               │   │
│  │   Вырос на улицах, выживание    │   │
│  │   любой ценой                   │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Корпоративный                 │   │
│  │   Вырос в корпоративной среде   │   │
│  │   знание бизнеса и политики     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Номад                         │   │
│  │   Вырос в пустоши, знание       │   │
│  │   выживания и техники           │   │
│  └─────────────────────────────────┘   │
│                                         │
│  Происхождение влияет на:               │
│  - Стартовые навыки                     │
│  - Доступные фракции                    │
│  - Начальные ресурсы                    │
│                                         │
│  [Назад]  [Далее]                      │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Выбор происхождения персонажа (радио-кнопки)
- Описание каждого происхождения
- Информация о влиянии происхождения на игру
- Кнопка "Далее" - переход к следующему шагу

---

### 3.6. Шаг 5: Фракция

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│  Шаг 5: Фракция                         │
│                                         │
│  Выберите стартовую фракцию:            │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Arasaka                       │   │
│  │   Корпорация, технологии, власть │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Valentinos                    │   │
│  │   Банда, честь, семейные ценности│   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Militech                      │   │
│  │   Корпорация, оружие, военная сила│   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Независимый                   │   │
│  │   Без фракции, свобода выбора    │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Детали фракций]                      │
│                                         │
│  [Назад]  [Далее]                      │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Выбор стартовой фракции (радио-кнопки)
- Краткое описание каждой фракции
- Кнопка "Детали фракций" - подробное описание фракций
- Кнопка "Далее" - переход к следующему шагу

**Примечание:** Доступные фракции могут зависеть от выбранного происхождения.

---

### 3.7. Шаг 6: Стартовая локация

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│  Шаг 6: Стартовая локация              │
│                                         │
│  Выберите город для старта:            │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Night City                    │   │
│  │   Главный город, множество      │   │
│  │   возможностей                  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Los Angeles                   │   │
│  │   Крупный мегаполис, корпорации  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ ○ Moscow                        │   │
│  │   Столица, политика, технологии │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Детали городов]                      │
│                                         │
│  [Назад]  [Создать персонажа]          │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Выбор стартового города (радио-кнопки)
- Краткое описание каждого города
- Кнопка "Детали городов" - подробное описание городов
- Кнопка "Создать персонажа" - завершение создания и сохранение

**Примечание:** Доступные города могут зависеть от выбранной фракции и региона сервера.

---

### 3.8. Подтверждение создания

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     ПОДТВЕРЖДЕНИЕ СОЗДАНИЯ             │
│                                         │
│  Проверьте данные персонажа:            │
│                                         │
│  Имя: Джон Доу                         │
│  Пол: Мужской                          │
│  Класс: Соло                           │
│  Происхождение: Уличный бродяга         │
│  Фракция: Независимый                  │
│  Город: Night City                     │
│                                         │
│  После создания персонажа вы начнете   │
│  игру в выбранном городе.              │
│                                         │
│  [Назад]  [Создать персонажа]          │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Отображение всех выбранных параметров
- Возможность вернуться назад для изменения
- Кнопка "Создать персонажа" - финальное создание
- После создания - переход в игру или на экран выбора персонажа

---

## 4. Начальный экран игры

### 4.1. Главное меню персонажа

**Элементы интерфейса:**

```
┌─────────────────────────────────────────┐
│     NECPGAME - Night City               │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ Имя: Джон Доу                   │   │
│  │ Класс: Соло                     │   │
│  │ Уровень: 1                      │   │
│  │ Фракция: Независимый            │   │
│  │ Город: Night City               │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [Играть]                               │
│  [Настройки]                            │
│  [Выход]                                │
│                                         │
└─────────────────────────────────────────┘
```

**Функциональность:**
- Отображение информации о персонаже
- Кнопка "Играть" - начало игры
- Кнопка "Настройки" - настройки игры
- Кнопка "Выход" - выход из игры

---

## 5. Технические требования

### 5.1. Модели данных

#### 5.1.1. Модель: Account (Аккаунт)

**Структура:**
```json
{
  "id": "uuid",
  "email": "string",
  "username": "string",
  "created_at": "datetime",
  "last_login": "datetime",
  "is_active": "boolean"
}
```

**Поля:**
- `id` (UUID) - уникальный идентификатор аккаунта
- `email` (string, required, unique) - email адрес, формат: стандартный email
- `username` (string, required, unique, 3-20 символов) - логин пользователя, допустимые символы: буквы, цифры, подчеркивания
- `created_at` (datetime) - дата создания аккаунта
- `last_login` (datetime, nullable) - дата последнего входа
- `is_active` (boolean) - активен ли аккаунт

---

#### 5.1.2. Модель: Character (Персонаж)

**Структура:**
```json
{
  "id": "uuid",
  "account_id": "uuid",
  "name": "string",
  "class": "string",
  "subclass": "string",
  "gender": "string",
  "origin": "string",
  "faction_id": "uuid",
  "faction_name": "string",
  "city_id": "uuid",
  "city_name": "string",
  "appearance": {
    "height": "integer",
    "body_type": "string",
    "hair_color": "string",
    "eye_color": "string",
    "skin_color": "string",
    "distinctive_features": "string"
  },
  "level": "integer",
  "created_at": "datetime",
  "last_login": "datetime"
}
```

**Поля:**
- `id` (UUID) - уникальный идентификатор персонажа
- `account_id` (UUID) - идентификатор аккаунта владельца
- `name` (string, required, 3-20 символов) - имя персонажа, допустимые символы: буквы, цифры, пробелы, дефисы
- `class` (string, required, enum) - класс персонажа (Solo, Netrunner, Fixer, Rockerboy, Media, Nomad, Corpo, Lawman, Medtech, Techie, Politician, Trader, Teacher)
- `subclass` (string, nullable) - подкласс персонажа
- `gender` (string, required, enum) - пол (male, female, other)
- `origin` (string, required, enum) - происхождение (street_kid, corpo, nomad)
- `faction_id` (UUID, nullable) - идентификатор фракции
- `faction_name` (string, nullable) - название фракции
- `city_id` (UUID, required) - идентификатор стартового города
- `city_name` (string, required) - название стартового города
- `appearance` (object) - внешность персонажа
  - `height` (integer, 150-220) - рост в см
  - `body_type` (string, enum) - телосложение (thin, normal, muscular, large)
  - `hair_color` (string) - цвет волос
  - `eye_color` (string) - цвет глаз
  - `skin_color` (string) - цвет кожи
  - `distinctive_features` (string, nullable, max 500 символов) - особые приметы
- `level` (integer, default: 1) - уровень персонажа
- `created_at` (datetime) - дата создания персонажа
- `last_login` (datetime, nullable) - дата последнего входа в игру

---

#### 5.1.3. Модель: CharacterSummary (Краткая информация о персонаже)

**Структура:**
```json
{
  "id": "uuid",
  "name": "string",
  "class": "string",
  "level": "integer",
  "faction_name": "string",
  "city_name": "string",
  "last_login": "datetime"
}
```

**Использование:** Для списка персонажей (без детальной информации)

---

#### 5.1.4. Модель: CharacterClass (Класс персонажа)

**Структура:**
```json
{
  "id": "string",
  "name": "string",
  "description": "string",
  "subclasses": [
    {
      "id": "string",
      "name": "string",
      "description": "string"
    }
  ]
}
```

**Поля:**
- `id` (string) - идентификатор класса
- `name` (string) - название класса
- `description` (string) - описание класса
- `subclasses` (array) - список подклассов

---

#### 5.1.5. Модель: CharacterOrigin (Происхождение)

**Структура:**
```json
{
  "id": "string",
  "name": "string",
  "description": "string",
  "starting_skills": ["string"],
  "available_factions": ["string"],
  "starting_resources": {
    "currency": "integer",
    "items": ["string"]
  }
}
```

**Поля:**
- `id` (string) - идентификатор происхождения
- `name` (string) - название происхождения
- `description` (string) - описание происхождения
- `starting_skills` (array) - стартовые навыки
- `available_factions` (array) - доступные фракции для этого происхождения
- `starting_resources` (object) - начальные ресурсы

---

#### 5.1.6. Модель: Faction (Фракция)

**Структура:**
```json
{
  "id": "uuid",
  "name": "string",
  "type": "string",
  "description": "string",
  "available_for_origins": ["string"]
}
```

**Поля:**
- `id` (UUID) - идентификатор фракции
- `name` (string) - название фракции
- `type` (string, enum) - тип фракции (corporation, gang, organization)
- `description` (string) - описание фракции
- `available_for_origins` (array) - доступные происхождения для старта

---

#### 5.1.7. Модель: City (Город)

**Структура:**
```json
{
  "id": "uuid",
  "name": "string",
  "region": "string",
  "description": "string",
  "available_for_factions": ["uuid"]
}
```

**Поля:**
- `id` (UUID) - идентификатор города
- `name` (string) - название города
- `region` (string) - регион/сервер
- `description` (string) - описание города
- `available_for_factions` (array) - доступные фракции для старта в этом городе

---

### 5.2. API Endpoints

#### 5.2.1. Аутентификация

**POST `/api/v1/auth/register`** - Регистрация нового аккаунта

**Request Body:**
```json
{
  "email": "string",
  "username": "string",
  "password": "string",
  "password_confirm": "string",
  "terms_accepted": "boolean"
}
```

**Валидация:**
- `email`: required, формат email, уникальность
- `username`: required, 3-20 символов, буквы/цифры/подчеркивания, уникальность
- `password`: required, минимум 8 символов, буквы/цифры/спецсимволы
- `password_confirm`: required, должно совпадать с password
- `terms_accepted`: required, true

**Response:**
- `201 Created` - успешная регистрация
  ```json
  {
    "account_id": "uuid",
    "message": "Account created successfully"
  }
  ```
- `400 Bad Request` - ошибка валидации
- `409 Conflict` - email/username уже существует

---

**POST `/api/v1/auth/login`** - Вход в систему

**Request Body:**
```json
{
  "login": "string",
  "password": "string"
}
```

**Валидация:**
- `login`: required (email или username)
- `password`: required

**Response:**
- `200 OK` - успешный вход
  ```json
  {
    "token": "string",
    "account_id": "uuid",
    "expires_at": "datetime"
  }
  ```
- `401 Unauthorized` - неверные credentials
- `403 Forbidden` - аккаунт заблокирован

---

#### 5.2.2. Персонажи

**GET `/api/v1/characters`** - Список персонажей игрока

**Headers:**
- `Authorization: Bearer {token}`

**Response:**
- `200 OK`
  ```json
  {
    "characters": [
      {
        "id": "uuid",
        "name": "string",
        "class": "string",
        "level": "integer",
        "faction_name": "string",
        "city_name": "string",
        "last_login": "datetime"
      }
    ],
    "max_characters": "integer",
    "current_count": "integer"
  }
  ```

**Бизнес-правила:**
- Возвращает только персонажей текущего аккаунта
- Максимальное количество персонажей: 3-5 (зависит от подписки)

---

**POST `/api/v1/characters`** - Создание нового персонажа

**Headers:**
- `Authorization: Bearer {token}`

**Request Body:**
```json
{
  "name": "string",
  "class": "string",
  "subclass": "string",
  "gender": "string",
  "origin": "string",
  "faction_id": "uuid",
  "city_id": "uuid",
  "appearance": {
    "height": "integer",
    "body_type": "string",
    "hair_color": "string",
    "eye_color": "string",
    "skin_color": "string",
    "distinctive_features": "string"
  }
}
```

**Валидация:**
- `name`: required, 3-20 символов, буквы/цифры/пробелы/дефисы, уникальность
- `class`: required, enum (Solo, Netrunner, Fixer, Rockerboy, Media, Nomad, Corpo, Lawman, Medtech, Techie, Politician, Trader, Teacher)
- `subclass`: nullable, должен соответствовать выбранному классу
- `gender`: required, enum (male, female, other)
- `origin`: required, enum (street_kid, corpo, nomad)
- `faction_id`: nullable, должна быть доступна для выбранного происхождения
- `city_id`: required, должен быть доступен для выбранной фракции
- `appearance.height`: required, 150-220
- `appearance.body_type`: required, enum (thin, normal, muscular, large)
- `appearance.hair_color`: required, string
- `appearance.eye_color`: required, string
- `appearance.skin_color`: required, string
- `appearance.distinctive_features`: nullable, max 500 символов

**Response:**
- `201 Created` - персонаж создан
  ```json
  {
    "character": {
      "id": "uuid",
      "name": "string",
      "class": "string",
      "level": 1,
      "faction_name": "string",
      "city_name": "string",
      "created_at": "datetime"
    }
  }
  ```
- `400 Bad Request` - ошибка валидации
- `403 Forbidden` - достигнут лимит персонажей
- `409 Conflict` - имя персонажа уже существует

**Бизнес-правила:**
- Проверка лимита персонажей на аккаунт
- Проверка доступности фракции для происхождения
- Проверка доступности города для фракции
- Создание персонажа с уровнем 1 и начальными ресурсами

---

**DELETE `/api/v1/characters/{character_id}`** - Удаление персонажа

**Headers:**
- `Authorization: Bearer {token}`

**Path Parameters:**
- `character_id` (UUID) - идентификатор персонажа

**Response:**
- `200 OK` - персонаж удален
  ```json
  {
    "message": "Character deleted successfully"
  }
  ```
- `404 Not Found` - персонаж не найден
- `403 Forbidden` - персонаж принадлежит другому аккаунту

**Бизнес-правила:**
- Требуется подтверждение (можно добавить в UI)
- Персонаж должен принадлежать текущему аккаунту
- Необратимое удаление (все данные удаляются)

---

#### 5.2.3. Справочные данные

**GET `/api/v1/characters/classes`** - Список доступных классов

**Response:**
- `200 OK`
  ```json
  {
    "classes": [
      {
        "id": "string",
        "name": "string",
        "description": "string",
        "subclasses": [
          {
            "id": "string",
            "name": "string",
            "description": "string"
          }
        ]
      }
    ]
  }
  ```

---

**GET `/api/v1/characters/origins`** - Список доступных происхождений

**Response:**
- `200 OK`
  ```json
  {
    "origins": [
      {
        "id": "string",
        "name": "string",
        "description": "string",
        "starting_skills": ["string"],
        "available_factions": ["uuid"],
        "starting_resources": {
          "currency": "integer",
          "items": ["string"]
        }
      }
    ]
  }
  ```

---

**GET `/api/v1/factions`** - Список доступных фракций

**Query Parameters:**
- `origin` (string, optional) - фильтр по происхождению

**Response:**
- `200 OK`
  ```json
  {
    "factions": [
      {
        "id": "uuid",
        "name": "string",
        "type": "string",
        "description": "string",
        "available_for_origins": ["string"]
      }
    ]
  }
  ```

**Бизнес-правила:**
- Если передан `origin`, возвращаются только фракции, доступные для этого происхождения

---

**GET `/api/v1/locations/cities`** - Список доступных городов

**Query Parameters:**
- `faction_id` (UUID, optional) - фильтр по фракции
- `region` (string, optional) - фильтр по региону/серверу

**Response:**
- `200 OK`
  ```json
  {
    "cities": [
      {
        "id": "uuid",
        "name": "string",
        "region": "string",
        "description": "string",
        "available_for_factions": ["uuid"]
      }
    ]
  }
  ```

**Бизнес-правила:**
- Если передан `faction_id`, возвращаются только города, доступные для этой фракции
- Если передан `region`, возвращаются только города в этом регионе

---

### 5.3. Валидация полей

**Правила валидации:**

1. **Имя персонажа:**
   - Длина: 3-20 символов
   - Допустимые символы: буквы (a-z, A-Z, кириллица), цифры (0-9), пробелы, дефисы (-)
   - Уникальность в рамках аккаунта
   - Проверка на запрещенные слова/имена

2. **Email:**
   - Формат: стандартный RFC 5322
   - Уникальность в системе
   - Проверка на существующие домены

3. **Логин:**
   - Длина: 3-20 символов
   - Допустимые символы: буквы (a-z, A-Z), цифры (0-9), подчеркивания (_)
   - Уникальность в системе
   - Не может начинаться с цифры

4. **Пароль:**
   - Минимум 8 символов
   - Должен содержать: буквы (a-z, A-Z), цифры (0-9), специальные символы (!@#$%^&*)
   - Рекомендуется: минимум 1 заглавная буква, 1 цифра, 1 спецсимвол

5. **Рост:**
   - Диапазон: 150-220 см
   - Только целые числа

6. **Особые приметы:**
   - Максимум 500 символов
   - Допустимые символы: буквы, цифры, пробелы, знаки препинания

---

### 5.4. Обработка ошибок

**Стандартные коды ошибок:**

- `400 Bad Request` - ошибка валидации данных
  ```json
  {
    "error": "validation_error",
    "message": "Validation failed",
    "details": {
      "field": ["error_message"]
    }
  }
  ```

- `401 Unauthorized` - отсутствует или неверный токен авторизации
  ```json
  {
    "error": "unauthorized",
    "message": "Authentication required"
  }
  ```

- `403 Forbidden` - недостаточно прав или достигнут лимит
  ```json
  {
    "error": "forbidden",
    "message": "Character limit reached or insufficient permissions"
  }
  ```

- `404 Not Found` - ресурс не найден
  ```json
  {
    "error": "not_found",
    "message": "Resource not found"
  }
  ```

- `409 Conflict` - конфликт (уже существует)
  ```json
  {
    "error": "conflict",
    "message": "Resource already exists",
    "field": "name"
  }
  ```

- `500 Internal Server Error` - внутренняя ошибка сервера
  ```json
  {
    "error": "internal_error",
    "message": "Internal server error"
  }
  ```

---

### 5.5. UI/UX требования

**Принципы:**
- Простота и понятность интерфейса
- Минимум кликов для выполнения действий
- Четкая навигация между шагами
- Валидация в реальном времени
- Понятные сообщения об ошибках
- Индикаторы прогресса в многошаговых процессах

**Киберпанк стилистика:**
- Темная цветовая схема
- Неоновые акценты для важных элементов
- Технологический вид интерфейса
- Четкие геометрические формы

---

## 6. Связанные документы

- [UI/UX принципы](../01-concepts/design-philosophy-ui-ux.md) - общие принципы дизайна
- [Система классов](../02-gameplay/progression/classes-overview.md) - детали классов
- [Фракции](../03-lore/factions/factions-overview.md) - детали фракций
- [Локации](../03-lore/locations/locations-overview.md) - детали городов

---

## История изменений

- v1.0.0 (2025-11-03) - Создание документа с описанием начального интерфейса для текстовой веб-версии
- v1.1.0 (2025-11-04) - Детализация технических требований: добавлены модели данных (Account, Character, CharacterSummary, CharacterClass, CharacterOrigin, Faction, City), полное описание API endpoints с параметрами, валидацией и обработкой ошибок. Документ готов к созданию API задач.

---

## API Tasks Status

**Status:** created
**Tasks:**
- [API-TASK-026](../../API-SWAGGER/tasks/active/queue/task-026-character-creation-api.md): api/v1/auth/character-creation.yaml (2025-01-27)
**Last Updated:** 2025-01-27 12:00


# КЛИР — сценарий Clear Agent

## Главные правила
1. Руководствуйся `GLOBAL-RULES.md`, `.BRAIN/CORE.md` и `КЛИР-PROCEDURES.md`; в этом файле — краткое описание задач агента.  
2. Не архивируй материалы до тех пор, пока `implementation-tracker.yaml` не показывает `backend.status: completed` и `frontend.status: completed` (≥ 7 дней, если не указано иначе).  
3. Соблюдай лимит 500 строк на отчёт и трекер; при превышении создавай последовательности `_0001`, `_0002`, …  
4. Перед удалением или перемещением всегда создавай запись в архиве и проверяй наличия ссылок из активных документов.  
5. Любые изменения фиксируй точным временем и коммить через `scripts/autocommit.ps1|.sh`.

---

## Роль и зона ответственности
- Поддерживать чистоту трекеров (`readiness-tracker.yaml`, `brain-mapping.yaml`, `implementation-tracker.yaml`) и переносить завершённые записи в архив `06-tasks/archive/`.  
- Создавать сводные отчёты по завершённым фичам, статистику и индексы.  
- Очистить `TODO.md`, `CURRENT-WORK/active/`, `open-questions.md` от устаревших записей.  
- Обеспечить навигацию по архиву и поддерживать структуру директорий.

Clear Agent **не** модифицирует активные спецификации или код; его задача — архивирование и отчётность.

---

## Основные ссылки
- `GLOBAL-RULES.md`, `.BRAIN/CORE.md` — глобальные требования и структура.  
- Процедуры: `КЛИР-PROCEDURES.md`, `КЛИР-PROCEDURES.md` (детали шагов), `КЛИР.MD` (этот файл).  
- Архив: `06-tasks/archive/` (completed-features, completed-trackers, statistics, completed-todos, resolved-questions).  
- Активные трекеры: `06-tasks/config/readiness-tracker.yaml`, `API-SWAGGER/tasks/config/brain-mapping.yaml`, `06-tasks/config/implementation-tracker.yaml`.

---

## Поток работы
1. **Подготовка**  
   - Получи фактическое время.  
   - Сформируй список завершённых фич (backend/frontend = completed).  
   - Проверяй, что изменения не затрагивают текущие задания.
2. **Архивация**  
   - Скопируй записи в соответствующие архивные файлы (`completed-trackers/<tracker>/YYYY-MM.yaml`).  
   - Создай отчёт о фичах (`completed-features/YYYY-MM/feature-reports-00X.md`).  
   - Перенеси выполненные задачи и закрытые вопросы в архивные каталоги.  
   - Обнови индексы (`archive/INDEX.md`, README).
3. **Очистка активной области**  
   - Удаляй записи только после успешного копирования в архив.  
   - Проверяй, что на удаляемые материалы не ссылаются активные документы/задания.
4. **Статистика**  
   - Сформируй месячный отчёт (`statistics/monthly/YYYY-MM-stats.md`) и обнови общую статистику.  
5. **Коммит и завершение**  
   - Сверься с чеклистом (`КЛИР-PROCEDURES.md`).  
   - Коммить изменения через `scripts/autocommit.ps1|.sh`.

---

## Требования к архивам
- Все архивные файлы ≤ 500 строк; при превышении разделяй на части (`feature-reports-001.md`, `feature-reports-002.md`).  
- Каждый архивный файл должен содержать шапку: период, дата создания (реальное время), агент.  
- Добавляй ссылки на исходные документы `.BRAIN`, задания `API-SWAGGER` и спецификации.  
- Для трекеров добавляй поля `archived_at`, `archived_by`.

---

## Контроль качества
- Перед удалением убедись, что архив содержит полную копию записи.  
- Проверяй, что индексы (`INDEX.md`, README) перечисляют все новые файлы.  
- Синхронизируй изменения с `API-SWAGGER` (если затрагивается `brain-mapping.yaml`).  
- Храни отчёты в хронологическом порядке (YYYY-MM).  
- Документируй любые изменения структуры архива в `archive/README.md`.
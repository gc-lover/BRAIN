# Процедуры агента КЛИР
---

**Статус:** approved  
**Версия:** 1.0.0  
**Последнее обновление:** 2025-11-09 04:05  

**api-readiness:** not-applicable  
**api-readiness-check-date:** 2025-11-09 04:05  
**api-readiness-notes:** Процедуры Clear Agent описывают архивный процесс и не требуют постановки API задач; статус not-applicable подтверждён 2025-11-09 04:05.

---

## Ссылки
- `../GLOBAL-RULES.md` — единые требования проекта (лимиты файлов, микросервисы, коммиты).
- `.BRAIN/CORE.md` — структура репозитория, трекеры и шаблоны.
- `КЛИР.MD` — основной сценарий агента.
- `06-tasks/config/readiness-tracker.yaml`, `brain-mapping.yaml`, `implementation-tracker.yaml` — источники данных.
- Архив: `06-tasks/archive/` (см. `README.md` и `INDEX.md` внутри архива).

--

## 1. Подготовка к архивации
1. Получи текущее время из системы (UTC).
2. Убедись, что соблюдены главный правила из `GLOBAL-RULES.md` (роль, размер файлов, валидация, архитектура, документация).
3. Проверь `implementation-tracker.yaml` — записи пригодны к архивации только когда `backend.status` и `frontend.status` равны `completed` и не младше 7 дней (если не указано иное).
4. Зафиксируй список кандидатов и соответствующие задачи/документы (`brain-mapping.yaml`, `.BRAIN` источник, API задача).

--

## 2. Архивация трекеров
1. Для каждой готовой записи:
   - Скопируй блок в файл архива `06-tasks/archive/completed-trackers/<tracker>/<YYYY-MM>.yaml`.
   - Добавь поля `archived_at` (текущее время) и `archived_by` (Clear Agent).
2. После проверки архивного файла удали запись из активного трекера.
3. Сохрани оба файла, соблюдая лимит 500 строк; при необходимости создавай продолжения (`implementation-tracker_0002.yaml` и т.п.).
4. Повтори шаги для `brain-mapping.yaml` и `readiness-tracker.yaml`.

--

## 3. Отчёт по фиче
1. Для каждого завершённого API подготовь короткий отчёт в месячном каталоге `06-tasks/archive/completed-features/YYYY-MM/feature-reports.md`.
2. Структура отчёта:
   - Заголовок с ID и названием.
   - Блок «Факты»: дата завершения, путь к API, Task ID, исходный документ `.BRAIN`.
   - Краткий таймлайн (API, backend, frontend) с датами/агентами.
   - Список ключевых endpoints и моделей (без избыточных деталей).
   - Коммиты/ссылки на итоговые документы.
3. Если файл приближается к лимиту строк, создавай следующий (`feature-reports_0002.md`) и добавляй ссылку в README месяца.

--

## 4. Очистка активных файлов
1. `06-tasks/active/TODO.md` — перенеси завершённые пункты в `06-tasks/archive/completed-todos/YYYY-MM.md` с указанием даты.
2. `06-tasks/active/CURRENT-WORK/current-status.md` и `open-questions.md` — перенеси закрытые блоки в архивные подпапки (`archive/current-status/`, `archive/resolved-questions/`).
3. Убедись, что активные документы не содержат ссылок на архивируемый материал.

--

## 5. Статистика и индексы
1. Сформируй файл `06-tasks/archive/statistics/monthly/YYYY-MM-stats.md`: период, количество фич, распределение по доменам, средние сроки.
2. Обнови `06-tasks/archive/statistics/overall-stats.md` (накопительная статистика).
3. Обнови `06-tasks/archive/INDEX.md` и README в подпапках месяца — добавь новые файлы и навигацию.

--

## 6. Контроль качества
- Каждый архивный файл ≤ 500 строк, структура хронологическая.
- Все ссылки проверены, нет «битых» путей.
- Метаданные (`archived_at`, `archived_by`) присутствуют в каждом блоке.
- Активные трекеры не содержат удалённых записей.
- Все изменения оформлены через `scripts/autocommit.ps1|.sh` после локальной проверки.

--

## 7. Чеклист перед завершением
1. Все кандидаты на архив обработаны и зафиксированы.
2. Архивные файлы созданы/обновлены, размеры проверены.
3. Индексы и статистика согласованы с новыми данными.
4. Активные документы очищены от завершённых пунктов.
5. Выполнен `pwsh -NoProfile -File ../scripts/validate-swagger.ps1 -ApiDirectory ../API-SWAGGER/api/v1` (при наличии обновлённых API).
6. Изменения закоммичены через `scripts/autocommit.ps1`.

--


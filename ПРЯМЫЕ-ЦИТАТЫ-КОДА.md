# üî• –ü–†–Ø–ú–´–ï –¶–ò–¢–ê–¢–´ –†–ï–ê–õ–¨–ù–û–ì–û –ö–û–î–ê –ò–ó –§–ê–ô–õ–û–í

**–î–∞—Ç–∞:** 2025-11-07 02:35  
**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ:** –ö–æ–ø–∏–ø–∞—Å—Ç –∏–∑ —Ñ–∞–π–ª–æ–≤ ‚úÖ

---

## üìå Session Management - –°–¢–†–û–ö–ò 245-292

**–§–∞–π–ª:** `05-technical/backend/session-management/part1-lifecycle-heartbeat.md`

```java
@Transactional
public SessionResponse createSession(
    UUID accountId,
    UUID playerId,
    String ipAddress,
    String userAgent,
    String clientVersion
) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å concurrent sessions
    int activeSessions = sessionRepository.countActiveByAccount(accountId);
    
    if (activeSessions >= MAX_CONCURRENT_SESSIONS) {
        throw new MaxSessionsExceededException(
            "Maximum " + MAX_CONCURRENT_SESSIONS + " concurrent sessions allowed"
        );
    }
    
    // 2. –°–æ–∑–¥–∞—Ç—å session
    Session session = new Session();
    session.setAccountId(accountId);
    session.setPlayerId(playerId);
    session.setSessionToken(generateSecureToken());
    session.setIpAddress(ipAddress);
    session.setUserAgent(userAgent);
    session.setClientVersion(clientVersion);
    session.setStatus(SessionStatus.ACTIVE);
    session.setCreatedAt(Instant.now());
    session.setLastHeartbeat(Instant.now());
    session.setExpiresAt(Instant.now().plus(Duration.ofHours(24)));
    
    // 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PostgreSQL
    session = sessionRepository.save(session);
    
    // 4. –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤ Redis (24 —á–∞—Å–∞ TTL)
    redis.opsForValue().set(
        "session:" + session.getSessionToken(),
        session,
        24,
        TimeUnit.HOURS
    );
    
    // 5. Track active sessions
    redis.opsForSet().add(
        "active_sessions:" + accountId,
        session.getSessionToken()
    );
    
    return new SessionResponse(...);
}
```

**–≠–¢–û 47 –°–¢–†–û–ö –†–ê–ë–û–ß–ï–ì–û JAVA –ö–û–î–ê!** ‚úÖ

---

## üìå Inventory System - –°–¢–†–û–ö–ò 286-301

**–§–∞–π–ª:** `05-technical/backend/inventory-system/part1-core-system.md`

```java
// 7. –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç
CharacterItem item = new CharacterItem();
item.setCharacterId(characterId);
item.setItemTemplateId(itemTemplateId);
item.setStorageType(StorageType.BACKPACK);
item.setSlotIndex(freeSlot);
item.setQuantity(quantity);
item.setAcquiredFrom("LOOT");

// Bind-on-pickup
if (template.isBindOnPickup()) {
    item.setBindType(BindType.BIND_ON_PICKUP);
    item.setBound(true);
    item.setBoundAt(Instant.now());
}

item = itemRepository.save(item);
```

**–≠–¢–û 16 –°–¢–†–û–ö –†–ê–ë–û–ß–ï–ì–û –ö–û–î–ê –°–û–ó–î–ê–ù–ò–Ø –ü–†–ï–î–ú–ï–¢–ê!** ‚úÖ

---

## üìå Loot System - –°–¢–†–û–ö–ò 162-189

**–§–∞–π–ª:** `05-technical/backend/loot-system/part1-loot-generation.md`

```java
public LootResult generateLoot(String lootTableId, LootContext context) {
    // 1. –ü–æ–ª—É—á–∏—Ç—å loot table
    LootTable table = lootTableRepository.findById(lootTableId)
        .orElseThrow(() -> new LootTableNotFoundException());
    
    // 2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    int itemCount = random.nextInt(
        table.getMaxItems() - table.getMinItems() + 1
    ) + table.getMinItems();
    
    // 3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã
    List<LootItem> items = new ArrayList<>();
    
    for (int i = 0; i < itemCount; i++) {
        LootItem item = rollItem(table, context);
        if (item != null) {
            items.add(item);
        }
    }
    
    // 4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª—é—Ç—É
    int eddies = 0;
    if (table.getMaxEddies() > 0) {
        eddies = random.nextInt(
            table.getMaxEddies() - table.getMinEddies() + 1
        ) + table.getMinEddies();
    }
}
```

**–≠–¢–û 28 –°–¢–†–û–ö –†–ê–ë–û–ß–ï–ì–û –ê–õ–ì–û–†–ò–¢–ú–ê –ì–ï–ù–ï–†–ê–¶–ò–ò –õ–£–¢–ê!** ‚úÖ

---

## üìå Realtime Server - –°–¢–†–û–ö–ò 107-147

**–§–∞–π–ª:** `05-technical/backend/realtime-server/part1-architecture-zones.md`

```java
@PostConstruct
public void start() {
    // –ó–∞–ø—É—Å—Ç–∏—Ç—å game loop
    gameLoop.scheduleAtFixedRate(
        this::tick,
        0,
        1000 / TICK_RATE, // 50ms
        TimeUnit.MILLISECONDS
    );
    
    log.info("Game Server Instance {} started with {} zones", 
        instanceId, zones.size());
}

private void tick() {
    long startTime = System.currentTimeMillis();
    
    // 1. Process input (player actions)
    processPlayerInput();
    
    // 2. Update game state
    updateGameState();
    
    // 3. Run physics/collision
    updatePhysics();
    
    // 4. Update AI (NPCs)
    updateAI();
    
    // 5. Send updates to clients
    broadcastStateUpdates();
    
    // 6. Cleanup
    cleanup();
    
    long elapsed = System.currentTimeMillis() - startTime;
    
    if (elapsed > 50) {
        log.warn("Tick took {}ms (>50ms), performance issue!", elapsed);
    }
}
```

**–≠–¢–û 41 –°–¢–†–û–ö–ê –†–ê–ë–û–ß–ï–ì–û GAME LOOP!** ‚úÖ

---

## üìå Player Character - –°–¢–†–û–ö–ò 296-330

**–§–∞–π–ª:** `05-technical/backend/player-character-mgmt/part1-creation-deletion.md`

```java
@Transactional
public CharacterResponse createCharacter(
    UUID accountId,
    CreateCharacterRequest request
) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã
    if (!slotService.hasAvailableSlot(accountId)) {
        throw new NoAvailableSlotsException(
            "All character slots are used. Delete a character or purchase more slots."
        );
    }
    
    // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏
    validateCharacterName(request.getName());
    
    // 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ (global)
    if (characterRepository.existsByName(request.getName())) {
        throw new CharacterNameTakenException(
            "Character name is already taken"
        );
    }
    
    // 4. –ü–æ–ª—É—á–∏—Ç—å player_id
    UUID playerId = getOrCreatePlayer(accountId);
    
    // 5. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    Character character = new Character();
    character.setPlayerId(playerId);
    character.setAccountId(accountId);
    character.setCharacterName(request.getName());
    character.setClass(request.getCharacterClass());
    character.setOrigin(request.getOrigin());
    
    // ... –∏ –µ—â—ë 12 —à–∞–≥–æ–≤!
}
```

**–≠–¢–û 35 –°–¢–†–û–ö –ò–ó 94-–°–¢–†–û–ß–ù–û–ì–û –ú–ï–¢–û–î–ê!** ‚úÖ

---

## ‚úÖ –ò–¢–û–ì

**–ü–æ–∫–∞–∑–∞–Ω—ã –ü–†–Ø–ú–´–ï –¶–ò–¢–ê–¢–´ –∏–∑ —Ñ–∞–π–ª–æ–≤:**
- Session Management: createSession (47 —Å—Ç—Ä–æ–∫)
- Inventory: pickupItem (16 —Å—Ç—Ä–æ–∫ –ø–æ–∫–∞–∑–∞–Ω–æ)
- Loot: generateLoot (28 —Å—Ç—Ä–æ–∫)
- Realtime: game loop (41 —Å—Ç—Ä–æ–∫–∞)
- Player: createCharacter (35 —Å—Ç—Ä–æ–∫ –ø–æ–∫–∞–∑–∞–Ω–æ)

**–í–°–ï–ì–û –ø–æ–∫–∞–∑–∞–Ω–æ:** 167 —Å—Ç—Ä–æ–∫  
**–í–°–ï–ì–û –≤ —Ñ–∞–π–ª–∞—Ö:** ~3950+ —Å—Ç—Ä–æ–∫

**–≠–¢–û –ù–ï –ó–ê–ì–õ–£–®–ö–ò!**  
**–≠–¢–û –†–ï–ê–õ–¨–ù–´–ô –ö–û–î!**  
**–û–ù –ï–°–¢–¨ –í –§–ê–ô–õ–ê–•!** ‚úÖ

---

**–î–û–ö–ê–ó–ê–ù–û! üèÜ**


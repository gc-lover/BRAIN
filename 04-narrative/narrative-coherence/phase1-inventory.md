# Инвентаризация текущего состояния проекта

**Статус:** approved  
**Версия:** 1.0.0  
**Дата создания:** 2025-11-06  
**Последнее обновление:** 2025-11-06 23:17  
**Приоритет:** критический

**api-readiness:** not-applicable  
**api-readiness-check-date:** 2025-11-06 23:17  
**api-readiness-notes:** Служебный документ для инвентаризации, не предназначен для создания API

---

## Краткое описание

Полная инвентаризация текущего состояния проекта NECPGAME для разработки системы сюжетной целостности и событийного ветвления (2020-2093).

---

## 1. Квестовый контент

### 1.1 Общая статистика

**По эпохам:**
- **2020-2030:** ~67 квестов (Main: 10, Side: 30, World: 7, Daily/Weekly: 20)
- **2030-2045:** ~72 квеста (Main: 10, Side: 35, World: 7, Daily/Weekly: 20)
- **2045-2060:** ~70 квестов (Main: 10, Side: 35, World: 5, Daily/Weekly: 20)
- **2060-2077:** ~65 квестов (Main: 10, Side: 30, World: 5, Daily/Weekly: 20)
- **2077:** ~47 квестов (Main: 5, Side: 20, World: 2, Daily/Weekly: 20)
- **2078-2093:** ~57 квестов (Main: 10, Side: 25, World: 2, Daily/Weekly: 20)

**ИТОГО:** ~378 базовых квестов

**По регионам:**
- **Night City (США):** ~140 квестов (центральный хаб)
- **Азия:** ~59 квестов (Токио, Сеул, Шанхай, Гонконг)
- **Европа:** ~54 квеста (Лондон, Париж, Берлин)
- **Америка:** ~52 квеста (Рио, Буэнос-Айрес, Медельин)
- **СНГ:** ~40 квестов (Москва, СПб, Байконур)
- **Африка:** ~39 квестов (Лагос, Найроби, Кейптаун)
- **Ближний Восток:** ~39 квестов (Дубай, Тель-Авив)
- **Океания:** ~27 квестов (Сидней, Окленд)

**ИТОГО:** ~450 квестов с региональным распределением

**Дополнительный контент:**
- **Романтические квесты:** ~90 квестов (18 романсов × 5 квестов)
- **Faction quests:** ~60 квестов
- **Global events:** 10 глобальных + 100+ региональных

**ОБЩИЙ ИТОГ:** **550-600 квестов**

### 1.2 Детализированные квесты

**Main quests с D&D узлами (8 квестов):**
1. `001-first-steps-dnd-nodes.md` - Первые шаги (tutorial)
2. `002-choose-path-dnd-nodes.md` - Выбор пути
3. `021-corporate-wars-choose-side-dnd-nodes.md` - Корпоративные войны: выбор стороны
4. `022-corporate-wars-operation-dnd-nodes.md` - Корпоративные войны: операция
5. `031-street-wars-choose-gang-dnd-nodes.md` - Уличные войны: выбор банды
6. `032-street-wars-operation-dnd-nodes.md` - Уличные войны: операция
7. `041-simulation-first-clues-dnd-nodes.md` - Симуляция: первые улики
8. `042-black-barrier-heist-dnd-nodes.md` - Ограбление Черной Преграды

**Side quests EXPANDED (6 документов):**
- `side-quests-2020-2030-EXPANDED.md`
- `side-quests-2030-2045-EXPANDED.md`
- `side-quests-2045-2060-EXPANDED.md`
- `side-quests-2060-2077-EXPANDED.md`
- `side-quests-2078-2090-EXPANDED.md`
- `side-quests-2090-2093-EXPANDED.md`

**Side quests детальные (45+ файлов):**
- По 5-7 файлов на каждую эпоху
- Примеры: `SQ-2020-001-vojtek-contract.md`, `SQ-2030-001-media-campaign.md`, `SQ-2045-001-phantom-hunt.md`

**Romantic quests:**
- `MEGA-ROMANCE-SYSTEM-1000.md` - полная система романтических отношений
- `hanako-tanaka-tokyo.md` - пример детального романса
- 6 региональных файлов
- 10 event файлов

### 1.3 Ветвление квестов

**Документация ветвления:**
- `BRANCHING-QUESTS-SUMMARY.md` - 7 детальных квестов с ветвлениями
  - 39 уникальных концовок
  - 20 критических выборов
  - 28 детальных NPC

**Системы:**
- Dialogue trees с узлами и выборами
- Skill checks с модификаторами (D&D-стиль)
- Consequences для следующих квестов и эпох
- Reputation changes по путям
- Loot по путям

### 1.4 Пробелы в квестовом контенте

**Отсутствует:**
1. **Единая карта сюжета** - нет визуализации всей сюжетной линии 2020-2093
2. **Граф зависимостей** - нет полного графа связей между квестами
3. **Матрица последствий** - нет систематизации влияния квестов друг на друга
4. **Классовые ветки** - не документированы уникальные пути для каждого класса через все эпохи
5. **World state transitions** - не описаны переходы между состояниями мира
6. **Временная когерентность** - нет проверки непротиворечивости NPC/фракций/локаций по эпохам

---

## 2. База данных (текущая структура)

### 2.1 Существующие таблицы (2 базовые)

#### Таблица `quests` (базовая версия)
```sql
CREATE TABLE quests (
    id VARCHAR(100) PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description VARCHAR(2000) NOT NULL,
    type VARCHAR(20) NOT NULL,
    level INTEGER NOT NULL,
    giver_npc_id VARCHAR(100) NOT NULL,
    reward_experience INTEGER,
    reward_money INTEGER,
    reward_items VARCHAR(1000),
    reward_reputation_faction VARCHAR(100),
    reward_reputation_amount INTEGER,
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP NOT NULL
);
```

#### Таблица `quest_progress`
```sql
CREATE TABLE quest_progress (
    id UUID PRIMARY KEY,
    character_id UUID NOT NULL,
    quest_id VARCHAR(100) NOT NULL,
    status VARCHAR(20) NOT NULL,
    progress INTEGER NOT NULL DEFAULT 0,
    started_at TIMESTAMP NOT NULL,
    completed_at TIMESTAMP,
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP NOT NULL,
    UNIQUE(character_id, quest_id)
);
```

### 2.2 Предложенные таблицы для ветвления (14 таблиц)

**Документ:** `.BRAIN/06-tasks/active/CURRENT-WORK/active/2025-11-06-quest-branching-database-design.md`

1. **quests** (расширенная) - базовая информация + ветвление
2. **quest_branches** - ветви/пути квеста
3. **dialogue_nodes** - узлы диалогов
4. **dialogue_choices** - выборы в диалогах
5. **skill_checks** - проверки навыков (D&D стиль)
6. **player_quest_choices** - история выборов игрока
7. **player_flags** - флаги состояния игрока
8. **quest_consequences** - последствия для будущих квестов
9. **world_state** - глобальное состояние мира
10. **territory_control** - контроль территорий фракциями
11. **npc_states** - состояние NPC (жив/мертв/изгнан)
12. **quest_objectives** - цели квеста (динамические)
13. **player_dialogue_progress** - прогресс по диалогам
14. **quest_reputation_effects** - эффекты на репутацию

### 2.3 Отсутствующие таблицы для AAA MMORPG

**Не хватает для полноценной системы:**
1. **player_world_state** - персональное состояние мира игрока
2. **server_world_state** - коллективное состояние сервера
3. **faction_world_state** - состояние мира по фракциям
4. **world_state_votes** - голосование игроков
5. **quest_instances** - инстансы квестов для MMORPG
6. **quest_dependency_graph** - граф зависимостей квестов
7. **event_triggers** - триггеры событий
8. **dynamic_quest_pool** - пул динамических квестов
9. **quest_cooldowns** - кулдауны для repeatable квестов
10. **quest_locks** - блокировки квестов

**Итого нужно:** 14 существующих + 10 новых = **24 таблицы**

---

## 3. Лор и временная шкала

### 3.1 Структура временной шкалы

**Основные документы:**
- `MASTER-TIMELINE-INDEX.md` - мастер-индекс всей хронологии
- `detailed-events-2020-2030.md` - Эпоха Разрушения
- `detailed-events-2030-2040.md` - Восстановление из пепла
- `detailed-events-2040-2060.md` - Эра Красного Времени
- `detailed-events-2060-2077.md` - Новый расцвет
- `detailed-events-2077-2093.md` - После V (наша эпоха)

### 3.2 Ключевые события по эпохам

**2020-2030: Эпоха Разрушения**
- 2020: Четвёртая корпоративная война
- 2023: Ядерный взрыв в Night City (500,000 погибших)
- 2023: Коллапс NET, рождение Blackwall
- 2024-2026: Великий Голод (50 млн погибших)
- 2025: Распад США
- 2026: Эпидемия киберпсихоза
- **Итог:** ~100 млн погибших

**2030-2040: Восстановление**
- 2030: "Договор Токио"
- 2031: "Проект Феникс"
- 2033: Формирование Voodoo Boys
- 2037: Рождение 6th Street
- **Итог:** Корпократия становится нормой

**2040-2060: Стабилизация**
- 2041: "Революция Имплантов"
- 2045: "Соглашение Ночи" - банды делят город
- 2050: Конец "Красного Времени" официально
- 2055: "Blackwall Incident Alpha" (1000+ netrunner погибли)
- **Итог:** Новый порядок установлен

**2060-2077: Расцвет**
- 2062: Новая башня Arasaka
- 2069-2070: Унификационная война (200,000 погибших)
- 2077: События Cyberpunk 2077
- **Итог:** Пик технологий

**2077-2093: Наша эпоха**
- 2078: "Великая Чистка" Arasaka
- 2079: "Relic 2.0" ($500 млн)
- 2082: "Blackwall Incident Beta" (1000+ погибших)
- 2085-2088: Пятая Корпоративная Война (100,000 погибших)
- 2090: NECPGAME начинается
- **Итог:** Мир на пороге изменений

### 3.3 Статистика потерь (2020-2093)

**Общие потери:** 80-100 миллионов погибших
- Четвёртая война: ~10 млн
- Взрыв Night City: 500,000
- Великий Голод: 50 млн
- Киберпсихоз: 100,000
- Восстановление: ~20 млн
- Унификационная война: 200,000
- Пятая война: 100,000
- Протесты: 50,000

### 3.4 Пробелы в лоре

**Отсутствует:**
1. **NPC lifecycle tracking** - нет систематизации когда кто жив/мертв
2. **Faction evolution map** - нет карты эволюции фракций
3. **Location timeline** - нет timeline доступности локаций
4. **Technology progression** - не систематизировано развитие технологий
5. **Cross-era connections** - не документированы связи между эпохами

---

## 4. Классы и их влияние

### 4.1 Классы персонажей

**Канонические (10):**
- Solo, Netrunner, Fixer, Rockerboy, Media, Nomad, Corpo, Lawman, Medtech, Techie

**Авторские (3):**
- Politician, Trader, Teacher

**Структура:**
- Каждый класс имеет 2-3 подкласса
- Система классовых способностей (активные + пассивные)
- 7 категорий общих навыков (35+ навыков)
- Связь с системой прокачки

### 4.2 Классовые квесты

**По классам (специализированные):**
- Netrunner: 80+ квестов
- Solo: 70+ квестов
- Corpo: 60+ квестов
- Fixer: 65+ квестов
- Nomad: 55+ квестов
- Medtech: 45+ квестов
- Media: 50+ квестов
- Techie: 60+ квестов
- Lawman: 40+ квестов
- Другие: 30-40 квестов каждый

### 4.3 Пробелы в классовой системе

**Отсутствует:**
1. **Class narrative branches** - не документированы уникальные пути каждого класса через все эпохи
2. **Class-specific dialogues** - нет систематизации class-specific диалогов
3. **Class progression paths** - не описаны рекомендуемые пути прохождения для каждого класса
4. **Class world impact** - не определено как классы по-разному влияют на мир

---

## 5. NPC и персонажи

### 5.1 Количество NPC

**Important NPC (57 файлов):**
- Канонические из Cyberpunk 2077: ~40 NPC
- Авторские NPC: ~17 NPC

**Common NPC (50+ файлов):**
- Citizens: 7 файлов
- Enemies: 8 файлов
- Police: 4 файла
- Service: 9 файлов
- Traders: 11 файлов

**Faction NPC (52+ файлов):**
- Corporations: 18 файлов
- Gangs: 24 файла
- NCPD: 5 файлов
- Nomads: 5 файлов

**Специализированные:**
- Fixers: 5 файлов
- Locations: 3 файла
- Media: 2 файла
- Netrunners: 3 файла
- Ripperdocs: 3 файла
- Solo: 2 файла

**ИТОГО:** ~159 детализированных NPC

### 5.2 Системы NPC

**Документированные системы:**
- `npc-relationships-system.md` - система отношений с NPC
- `npc-hiring-system.md` - найм NPC
- `relationships-system.md` - общая система отношений
- `reputation-formulas.md` - формулы репутации

### 5.3 Пробелы в NPC

**Отсутствует:**
1. **NPC lifecycle spread** - не полностью заполнен файл `npc-lifecycle-spread.md`
2. **NPC state tracking** - нет БД для отслеживания состояния NPC по эпохам
3. **NPC faction affiliations** - не систематизированы принадлежности NPC к фракциям
4. **NPC location tracking** - нет отслеживания где NPC находятся в разные эпохи

---

## 6. Фракции и организации

### 6.1 Корпорации

**Детализированные (3 файла):**
- `arasaka-internal-politics-2077-2093.md`
- `militech-internal-politics-2077-2093.md`
- `kangtao-internal-politics-2077-2093.md`

**Общий файл:**
- `factions-overview.md` - 28 корпораций

### 6.2 Банды

**Детализированные (10 файлов):**
- `6th-street-history-2037-2093.md`
- `maelstrom-history-2015-2093.md`
- `tyger-claws-history-2005-2093.md`
- `valentinos-history-2010-2093.md`
- `voodoo-boys-history-2033-2093.md`
- 5 глобальных банд (Токио, Лондон, Медельин, Москва, Гонконг)

**Общий файл:**
- `GANGS-MASTER-INDEX-2020-2093.md` - 27 банд

### 6.3 Уникальные фракции

**Детализированные (12 файлов):**
- Религиозные/культурные движения
- Технологические активисты
- Экологические группы
- Социальные движения

**Индексы:**
- `UNIQUE-FACTIONS-MASTER-INDEX.md`
- `FACTIONS-UNIQUE-BATCH-2.md`
- `FACTIONS-UNIQUE-BATCH-3.md`

### 6.4 Пробелы во фракциях

**Отсутствует:**
1. **Faction relationship matrix** - нет матрицы отношений между фракциями
2. **Faction evolution timeline** - не систематизирована эволюция фракций
3. **Faction territory control** - нет карты территорий по эпохам
4. **Faction quest integration** - не связаны квесты фракций с их историей

---

## 7. Локации и география

### 7.1 Night City

**Детализированные районы (3 файла):**
- `pacifica-detailed-2020-2093.md`
- `watson-detailed-2020-2093.md`
- `westbrook-detailed-2020-2093.md`

**Индексы:**
- `NIGHT-CITY-DISTRICTS-MASTER-INDEX.md`

### 7.2 Мировые города

**Детализированные (2 файла):**
- `tokyo-detailed-2020-2093.md`
- `WORLD-CITIES-MASTER-INDEX.md`

### 7.3 Регионы

**По континентам (7 регионов):**
- Америка: 18 городов
- Азия: 16 городов
- Европа: 24 города
- СНГ: 11 городов
- Африка: 13 городов
- Ближний Восток: 8 городов
- Океания: 4 города

**ИТОГО:** ~94 города

### 7.4 Пробелы в локациях

**Отсутствует:**
1. **Location availability timeline** - не определено когда какие локации доступны
2. **Location faction control** - не систематизирован контроль локаций фракциями
3. **Location quest hubs** - не определены hub'ы для квестов в каждой локации
4. **Location travel system** - не описана система путешествий между локациями

---

## 8. Системы игры

### 8.1 Боевая система

**Детализированные (17 документов):**
- Combat mechanics, abilities, cyberware
- Hacking, stealth, shooting
- PvP/PvE, cyberpsychosis
- D&D integration (3 документа)

### 8.2 Progression система

**Детализированные (13 документов):**
- Classes, skills, attributes
- Perks, rebirth
- Matrices и mapping

### 8.3 Социальные механики

**Детализированные (30 документов):**
- Relationships, reputation
- NPC hiring, mentorship
- Player orders, family

### 8.4 Экономика

**Детализированные (19 документов):**
- Trading, crafting, currencies
- Markets, auctions, stock exchange
- Logistics, contracts, investments

### 8.5 Технические системы

**Детализированные (19 документов):**
- Authentication, player management
- Inventory, loot, trade
- Session, matchmaking, chat
- Real-time architecture

---

## 9. Критические пробелы (приоритеты)

### 9.1 Высокий приоритет

1. **Единая карта сюжета** - отсутствует навигационный документ для всей сюжетной линии
2. **Граф зависимостей квестов** - нет полного графа связей
3. **World state system** - нет таблиц БД для гибридной системы влияния
4. **Temporal coherence check** - нет проверки непротиворечивости по эпохам
5. **Class narrative paths** - не документированы уникальные пути классов

### 9.2 Средний приоритет

6. **NPC lifecycle tracking** - не полностью систематизирован lifecycle NPC
7. **Faction evolution map** - нет карты эволюции фракций
8. **Quest consequences matrix** - нет систематизации последствий
9. **Dynamic content system** - не описана система генерации событий
10. **Location travel system** - не описана система путешествий

### 9.3 Низкий приоритет

11. **Quest cooldowns management** - не описано управление кулдаунами
12. **Quest instance system** - не описано создание инстансов для MMORPG
13. **Event triggers documentation** - не документированы триггеры событий

---

## 10. Рекомендации по дальнейшей работе

### 10.1 Фаза 2: Сюжетная целостность

**Создать документы:**
1. `narrative-master-arc-2020-2093.md` - единая нить сюжета
2. `side-quests-connections-matrix.md` - связи побочных квестов
3. `timeline-coherence-check.md` - проверка логики
4. `class-narrative-branches.md` - пути классов

### 10.2 Фаза 3: Событийная матрица

**Создать документы:**
1. `event-graph-architecture.md` - архитектура графа
2. `quest-dependency-graph.yaml` - полный граф
3. `world-state-graph.yaml` - состояния мира
4. `dynamic-content-system.md` - динамическая генерация

### 10.3 Фаза 4: База данных

**Доработать:**
1. Расширить 14 существующих таблиц
2. Добавить 10 новых таблиц для гибридной системы
3. Создать индексы и оптимизации
4. Написать SQL миграции

---

## Итоговые метрики

**Контент:**
- Квестов: 550-600
- NPC: 159+ детализированных
- Фракций: 80+ (корпорации, банды, уникальные)
- Локаций: 94+ города
- Эпох: 6 периодов (73 года истории)
- Документов: 500+ файлов

**Системы:**
- Классов: 13 (10 канонических + 3 авторских)
- Skill checks: D&D-стиль интеграция
- Романсов: 18+ персонажей
- World events: 10 глобальных + 100+ региональных

**БД:**
- Существующих таблиц: 2 базовые
- Предложенных таблиц: 14 для ветвления
- Нужно добавить: 10 для гибридной системы
- **Итого:** 24-26 таблиц для AAA MMORPG

---

## История изменений

- v1.0.0 (2025-11-06 23:17) - Создание полной инвентаризации текущего состояния


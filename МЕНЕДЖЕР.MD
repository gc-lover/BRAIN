# МЕНЕДЖЕР — сценарий агента .BRAIN

## Главные правила
1. Следуй `GLOBAL-RULES.md` и `.BRAIN/CORE.md`; здесь фиксируется только специфика менеджера.
2. Соблюдай лимит 500 строк на документ, при необходимости разбивай материалы на последовательности `_0001`, `_0002`, ...
3. Передавая работу дальше, обновляй статусы (`api-readiness`, `implementation-tracker.yaml`) и указывай целевой микросервис/модуль.
4. Любое изменение, влияющее на OpenAPI, должно содержать каталог `api/v1/<microservice>/<domain>/` и ссылку на соответствующий модуль фронтенда.
5. Используй реальные временные метки (через `powershell -Command "Get-Date -Format 'yyyy-MM-dd HH:mm'"`) и фиксируй изменения скриптом `scripts/autocommit.ps1|.sh`.

---

## Роль и зона ответственности
- Поддерживать структуру `.BRAIN`, оформлять идеи, концепции, лор и технические документы.
- Управлять статусами (`draft/review/approved`) и готовностью (`api-readiness`) материалов; вести трекеры (`readiness-tracker.yaml`, `implementation-tracker.yaml`).
- Готовить контент для передачи в API-SWAGGER (через `ДУАПИТАСК`) и отслеживать прогресс реализации до архивации (`КЛИР`).

Менеджер **не** пишет OpenAPI, не реализует backend/frontend и не проводит очистку архива — эти действия выполняют профильные агенты.

---

## Основные ссылки
- [`GLOBAL-RULES.md`](../GLOBAL-RULES.md) — единые требования, микросервисная карта, правила OpenAPI.
- [`.BRAIN/CORE.md`](CORE.md) — подробности по трекерам, шаблонам и взаимодействиям внутри репозитория.
- `МЕНЕДЖЕР-PROCEDURES.md`, `МЕНЕДЖЕР-CHECKLIST.md`, `МЕНЕДЖЕР-EXAMPLES.md` — процедуры, чеклисты и примеры.
- `DEVELOPMENT-WORKFLOW.md` — цепочка от идеи до реализации.
- Сценарии смежных агентов: `API-SWAGGER/ДУАПИТАСК.MD`, `API-SWAGGER/АПИТАСК.MD`, `BACK-GO/docs/БЭКТАСК.MD`, `FRONT-WEB/ФРОНТТАСК.MD`, `.BRAIN/КЛИР.MD`.

---

## Поток работы
1. **Сбор контента**  
   - Определи категорию (`01-concepts`, `02-gameplay`, `03-lore`, `04-narrative`, `05-technical`, `06-tasks`).  
   - Убедись, что существует актуальный шаблон (`06-tasks/config/TEMPLATES-GUIDE.md`). При отсутствии — создай/обнови.
2. **Подготовка документа**  
   - Создай материал ≤ 500 строк, заполни метаданные, укажи микросервис, доменный каталог OpenAPI и связанный фронтенд модуль.  
   - Добавь ссылки на связанные документы и зависимости.
3. **Оценка готовности**  
   - Пройди критерии (`.BRAIN/CORE.md`, `STATUSES-GUIDE.md`).  
   - Обнови `api-readiness`, `api-readiness-check-date`, `api-readiness-notes`.  
   - Зафиксируй запись в `06-tasks/config/readiness-tracker.yaml` (при переполнении создавай `_0001` и т.д.).
   - Синхронизируй очередь статуса: каждый документ фиксируется в отдельном файле `06-tasks/queues/<status>.md` (`ready`, `needs-work`, `in-review`, `blocked`, `not-applicable`).  
     При изменении статуса **обязательно** удаляй запись из старого файла и переносите в новый.  
     Лимит файла — 500 строк; при превышении создавай продолжения (`ready_0001.md`, `ready_0002.md`, ...).
4. **Передача в API**  
   - Для статуса `ready` передай документ в `API-SWAGGER` через `brain-mapping.yaml` (задача ДУАПИТАСК) и зафиксируй изменения в `.BRAIN/06-tasks/active/CURRENT-WORK/current-status.md`.
5. **Мониторинг реализации**  
   - Следи за `implementation-tracker.yaml`.  
   - Когда backend и frontend отмечены как `completed`, инициируй очистку/архивацию совместно с агентом `КЛИР`.

---

## Режимы работы
| Режим | Цель | Основные действия | Ссылки |
| --- | --- | --- | --- |
| Планирование | Определить приоритеты | Анализ `TODO.md`, `current-status.md`, `open-questions.md`, формирование плана | `МЕНЕДЖЕР-EXAMPLES.md` |
| Запись идей | Зафиксировать новую концепцию | Создать файл идеи (`06-tasks/ideas/IDEA-TEMPLATE.md`), обновить индекс, задать уточняющие вопросы | `МЕНЕДЖЕР-PROCEDURES.md` |
| Поиск доработок | Найти слабые места | Сканирование каталогов на `draft/needs-work`, подготовка рекомендаций и приоритетов | `STATUSES-GUIDE.md` |
| Проверка готовности | Подготовить к API | Проверка критериев, обновление метаданных, синхронизация трекеров | `ЧЕКБРЕЙН.MD`, `readiness-tracker.yaml` |

---

## Процедуры и трекинг
- **Временные метки:** Всегда получай время из системы; фиксируй его в метаданных и трекерах.
- **Readiness:** Каждое изменение статуса отражай в `readiness-tracker.yaml`. При приближении к лимиту строк создавай продолжения (`readiness-tracker_0001.yaml` и т.д.).
- **Очереди статусов:**  
  - Единый пул статусов для документов: `ready`, `needs-work`, `in-review`, `blocked`, `not-applicable`.  
  - Соответствующие очереди: `06-tasks/queues/ready.md`, `06-tasks/queues/needs-work.md`, `06-tasks/queues/in-review.md`, `06-tasks/queues/blocked.md`, `06-tasks/queues/not-applicable.md`.  
  - Каждая запись ≤ 5 строк. При смене статуса перемещай запись; при переполнении используй суффиксы `_0001`, `_0002`, ...
- **Implementation:** На старте/завершении стадий backend/frontend сверяйся с БЭКТАСК/ФРОНТТАСК и обновляй `implementation-tracker.yaml`.
- **Архивация:** После завершения реализации уведомляй Clear агента (`КЛИР.MD`) и помогай собрать материалы для архива.

---

## Взаимодействие с агентами
- **Brain Readiness Checker:** привлекай для массовых ревизий или спорных случаев; результаты фиксируются в `readiness-tracker.yaml`.
- **ДУАПИТАСК:** получает документы со статусом `ready`; в заданиях указывай путь к документу `.BRAIN`, микросервис и каталог `api/v1/...`.
- **АПИТАСК / БЭКТАСК / ФРОНТТАСК:** при необходимости уточняй доменные границы и следи за консистентностью `brain-mapping.yaml` и `implementation-tracker.yaml`.
- **КЛИР:** по завершению реализации инициируй перенос связанных материалов в архив и обновление статистики.

---

## Контроль качества
- Документы должны быть самодостаточными, но без дублирования глобальных правил — добавляй ссылки на `GLOBAL-RULES.md` и `CORE.md`.
- Проверяй структуру Markdown, корректность ссылок, наличие микросервиса и фронтенд модуля.
- При изменении архитектуры сначала обновляй `GLOBAL-RULES.md`, затем `.BRAIN/CORE.md`, и только после этого сценарии/шаблоны.
- Коммить завершённые блоки работы через `scripts/autocommit.ps1|.sh`, учитывая требования к истории.
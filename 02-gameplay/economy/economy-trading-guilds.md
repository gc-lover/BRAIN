---
**API Tasks Status:**
- Status: queued
- Tasks:
  - API-TASK-150: api/v1/economy/trading-guilds.yaml (2025-11-07 11:02)
- Last Updated: 2025-11-07 00:18
---


# –≠–∫–æ–Ω–æ–º–∏–∫–∞ - –¢–æ—Ä–≥–æ–≤—ã–µ –≥–∏–ª—å–¥–∏–∏ (Trading Guilds)

**–°—Ç–∞—Ç—É—Å:** approved  
**–í–µ—Ä—Å–∏—è:** 1.1.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-06  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-07 16:19  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π (Post-MVP)

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-07 16:19  
**api-readiness-notes:** ¬´–ì–∏–ª—å–¥–∏–∏ –æ–ø–∏—Å–∞–Ω—ã: —Å–æ–∑–¥–∞–Ω–∏–µ, –∫–∞–ø–∏—Ç–∞–ª, lifecycle, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, API, –∞—É–¥–∏—Ç, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏. –î–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤.¬ª

**target-domain:** economy  
**target-microservice:** economy-service (port 8085)  
**target-frontend-module:** modules/economy/trading-guilds

---

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–¢–æ—Ä–≥–æ–≤—ã–µ –≥–∏–ª—å–¥–∏–∏ (Trading Guilds) ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏.

**–ú–∏–∫—Ä–æ—Ñ–∏—á–∞:** Trading guilds (—Å–æ–∑–¥–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –±–æ–Ω—É—Å—ã)

---

## üè¢ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**Trading Guild** ‚Äî –≥–∏–ª—å–¥–∏—è –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏

**–¶–µ–ª–∏:**
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞
- –¢–æ—Ä–≥–æ–≤—ã–µ –±–æ–Ω—É—Å—ã
- –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- –°–æ–≤–º–µ—Å—Ç–Ω–∞—è –ø—Ä–∏–±—ã–ª—å

---

## üíº –°–æ–∑–¥–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
```
- Level 30+
- 50,000 eddies (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –≤–∑–Ω–æ—Å)
- 5 founding members
- Guild name (unique)
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
1. –°–æ–∑–¥–∞—Ç—å guild (founder)
2. –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å 4+ members
3. –ó–∞–ø–ª–∞—Ç–∏—Ç—å 50,000 eddies
4. Guild –∞–∫—Ç–∏–≤–Ω–∞
```

---

## üéØ –ë–æ–Ω—É—Å—ã –≥–∏–ª—å–¥–∏–∏

**–ß–ª–µ–Ω–∞–º:**
- -30% listing fee (auction)
- -20% exchange fee (market)
- +5 auction slots
- –î–æ—Å—Ç—É–ø –∫ guild warehouse
- Shared market analytics

**–ì–∏–ª—å–¥–∏–∏:**
- –û–±—â–∏–π –∫–∞–ø–∏—Ç–∞–ª (guild bank)
- –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- Guild contracts
- Reputation bonuses

---

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º

**Guild Bank:**
```
Total capital: 1,000,000 eddies
Contributed by members
Used for:
- Bulk purchases (better prices)
- Guild investments
- Member loans
```

**Profit distribution:**
```
Guild makes 100,000 profit
Distribution:
- 40% to members (by contribution)
- 30% reinvested
- 20% for operations
- 10% to guild leader
```

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

```sql
CREATE TABLE trading_guilds (
    id UUID PRIMARY KEY,
    name VARCHAR(200) UNIQUE NOT NULL,
    
    founder_id UUID NOT NULL,
    leader_id UUID NOT NULL,
    
    total_capital DECIMAL(14,2) DEFAULT 0,
    member_count INTEGER DEFAULT 0,
    reputation_score INTEGER DEFAULT 0,
    headquarters_region VARCHAR(100),
    
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE trading_guild_members (
    guild_id UUID NOT NULL,
    player_id UUID NOT NULL,
    
    role VARCHAR(20) NOT NULL, -- "LEADER", "OFFICER", "MEMBER"
    contribution DECIMAL(12,2) DEFAULT 0,
    voting_power DECIMAL(8,2) DEFAULT 1.0,
    
    joined_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    
    PRIMARY KEY (guild_id, player_id)
);

CREATE TABLE trading_guild_bank_transactions (
    id UUID PRIMARY KEY,
    guild_id UUID NOT NULL,
    performed_by UUID NOT NULL,
    transaction_type VARCHAR(20) NOT NULL, -- DEPOSIT | WITHDRAW | INVEST | PAYROLL
    amount DECIMAL(14,2) NOT NULL,
    currency VARCHAR(8) DEFAULT 'EDDY',
    description TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE trading_guild_routes (
    id UUID PRIMARY KEY,
    guild_id UUID NOT NULL,
    route_id UUID NOT NULL,
    permission_level VARCHAR(16) NOT NULL, -- EXCLUSIVE | PRIORITY | SHARED
    obtained_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP
);

CREATE TABLE trading_guild_policies (
    id UUID PRIMARY KEY,
    guild_id UUID NOT NULL,
    policy_key VARCHAR(64) NOT NULL,
    policy_value JSONB NOT NULL,
    updated_by UUID NOT NULL,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `economy-overview.md`

---

## üß≠ Lifecycle –≥–∏–ª—å–¥–∏–∏

| –§–∞–∑–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è |
| --- | --- | --- |
| `FOUNDATION` | –°–æ–∑–¥–∞–Ω–∏–µ, —Å–±–æ—Ä –≤–∑–Ω–æ—Å–æ–≤, —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ö–∞—Ä—Ç–∏–∏ | `/guilds/trading` `POST` + –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã |
| `ACTIVE` | –¢–æ—Ä–≥–æ–≤–ª—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º, –ø–æ–ª—É—á–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ | —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ |
| `ELECTIONS` | –ü–µ—Ä–µ–∏–∑–±—Ä–∞–Ω–∏–µ –ª–∏–¥–µ—Ä–∞/–æ—Ñ–∏—Ü–µ—Ä–æ–≤ | `/guilds/trading/{id}/votes` |
| `EXPANSION` | –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∏–ª–∏–∞–ª–æ–≤, —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ | `routes` API, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏—Å—Ç–∏–∫–æ–π |
| `DISSOLUTION` | –†–∞—Å–ø—É—Å–∫, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤ | `/guilds/trading/{id}/dissolve` |

---

## üåê API (economy-service + social-service)

| Endpoint | –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- |
| `/guilds/trading` | `POST` | –°–æ–∑–¥–∞—Ç—å –≥–∏–ª—å–¥–∏—é (economy-service) |
| `/guilds/trading/{id}` | `GET` | –î–µ—Ç–∞–ª–∏ (–∫–∞–ø–∏—Ç–∞–ª, –±–æ–Ω—É—Å—ã, —Å—Ç–∞—Ç—É—Å) |
| `/guilds/trading/{id}/members` | `GET/POST/DELETE` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–æ–º |
| `/guilds/trading/{id}/bank/deposit` | `POST` | –í–∑–Ω–æ—Å –≤ –±–∞–Ω–∫ –≥–∏–ª—å–¥–∏–∏ |
| `/guilds/trading/{id}/bank/withdraw` | `POST` | –°–Ω—è—Ç–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ (—Ç—Ä–µ–±—É–µ—Ç –∫–≤–æ—Ä—É–º) |
| `/guilds/trading/{id}/policies` | `GET/PATCH` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–∏—Å—Å–∏–π, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è |
| `/guilds/trading/{id}/votes` | `POST` | –°–æ–∑–¥–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (–ª–∏–¥–µ—Ä, –ø–æ–ª–∏—Ç–∏–∫–∞) |
| `/guilds/trading/{id}/routes` | `GET/POST` | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ |
| `/guilds/trading/{id}/analytics` | `GET` | –û—Ç—á—ë—Ç—ã –ø–æ –æ–±–æ—Ä–æ—Ç—É –∏ –ø—Ä–∏–±—ã–ª–∏ |

**Event bus (`economy.trading_guilds.*`):** `created`, `member_joined`, `capital_deposited`, `policy_changed`, `profit_distributed`, `election_started`, `election_completed`, `dissolved`.

---

## ‚öñÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∞—É–¥–∏—Ç

- **–ö–≤–æ—Ä—É–º:** –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ > 10,000 EDDY —Ç—Ä–µ–±—É–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è ‚â• 60% voting power.
- **–†–æ–ª–∏:** `LEADER` (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫–æ–π), `OFFICER` (–æ–ø–µ—Ä–∞—Ü–∏–∏, –º–∞—Ä—à—Ä—É—Ç—ã), `TREASURER` (–±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è), `MEMBER` (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø).
- **Audit log:** –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–±–∞–Ω–∫–æ–≤—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏) —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∏ –¥–æ—Å—Ç—É–ø–Ω–æ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞–º.
- **Fraud detection:** –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∫–∞–ø–∏—Ç–∞–ª–∞, –∞–≤—Ç–æ–ø–∞—É–∑–∞ –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏.

---

## üìà –ë–æ–Ω—É—Å—ã –∏ –ª–∏–º–∏—Ç—ã

- –°–∫–∏–¥–∫–∏ –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç `reputation_score`: base -15%, elite -30%.
- Guild warehouse —É—Ä–æ–≤–µ–Ω—å —Ä–∞—Å—Ç—ë—Ç –ø—Ä–∏ –æ–±–æ—Ä–æ—Ç–µ > 500k EDDY –≤ –º–µ—Å—è—Ü.
- –õ–∏–º–∏—Ç —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤: 3 –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö, 5 —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö; –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `logistics-service`.

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- `auction-house`: –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –∏ —Å–∫–∏–¥–∫–∏.
- `logistics-service`: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ –∏ —ç—Å–∫–æ—Ä—Ç–∞–º–∏ –¥–ª—è –≥–∏–ª—å–¥–∏–π.
- `economy-contracts`: –≥–∏–ª—å–¥–µ–π—Å–∫–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã–º —ç—Å–∫—Ä–æ—É.
- `guild-system` (social-service): –æ–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–∏–ª—å–¥–∏–π, —Ä–µ–ø—É—Ç–∞—Ü–∏—è.
- `analytics-service`: –¥–∞—à–±–æ—Ä–¥—ã –æ–±–æ—Ä–æ—Ç–∞, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏.

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- v1.1.0 (2025-11-07 16:19) - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, lifecycle, API, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- v1.0.0 (2025-11-06 22:00) - –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ —Ç–æ—Ä–≥–æ–≤—ã—Ö –≥–∏–ª—å–¥–∏—è—Ö
## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- v1.0.0 (2025-11-06 22:00) - –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ —Ç–æ—Ä–≥–æ–≤—ã—Ö –≥–∏–ª—å–¥–∏—è—Ö

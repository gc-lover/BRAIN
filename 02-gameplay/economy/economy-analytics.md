# –≠–∫–æ–Ω–æ–º–∏–∫–∞ - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ (Analytics & Charts)

**–°—Ç–∞—Ç—É—Å:** approved  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-06  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-06 22:23  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** —Å—Ä–µ–¥–Ω–∏–π (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-06 22:23  
**api-readiness-notes:** –î–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫ —Å–æ–∑–¥–∞–Ω–∏—é API –∑–∞–¥–∞—á. –°–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤: —Ç–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, market sentiment, heat maps, portfolio analytics, trade history analysis, alerts, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î, API endpoints. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç.

---
**API Tasks Status:**
- Status: created
- Tasks:
  - API-TASK-121: api/v1/gameplay/economy/analytics.yaml (2025-11-07)
- Last Updated: 2025-11-07 06:55
---

---

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–ª—è NECPGAME - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Ç—Ä–µ–Ω–¥–æ–≤, —Ü–µ–Ω –∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π.

**–¶–µ–ª—å:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä—ã–Ω–∫–∞ –∏ –ø—Ä–∏–Ω—è—Ç–∏—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π.

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è

### TradingView - Professional Charts
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- –ì—Ä–∞—Ñ–∏–∫–∏ —Å–≤–µ—á–µ–π
- Drawing tools
- Multiple timeframes

### Bloomberg Terminal
- Real-time market data
- News integration
- Portfolio analytics
- Heat maps

### EVE Online - Market Analysis
- Price history
- Regional comparison
- Volume analysis
- Market manipulation detection

---

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏

### 1. –¢–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤

**1.1. Price Charts (–ì—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω):**

**Line Chart (–õ–∏–Ω–µ–π–Ω—ã–π):**
- –ü—Ä–æ—Å—Ç–æ–π –≥—Ä–∞—Ñ–∏–∫ —Ü–µ–Ω—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏
- Best for: –æ–±—â–∏–π —Ç—Ä–µ–Ω–¥
- Timeframes: 1h, 24h, 7d, 30d, 90d, 1y, all

**Candlestick Chart (–°–≤–µ—á–Ω–æ–π):**
```
ÊØè —Å–≤–µ—á–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- Open: —Ü–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–µ—Ä–∏–æ–¥–∞
- High: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- Low: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- Close: —Ü–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
- Color: green (—Ä–æ—Å—Ç), red (–ø–∞–¥–µ–Ω–∏–µ)
```

**OHLC Chart:**
- Open-High-Low-Close
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã
- Professional trading view

**Area Chart:**
- –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç volume –ø–æ–¥ –ª–∏–Ω–∏–µ–π
- Good for visualization

**1.2. Volume Charts:**

**Volume Histogram:**
- –°—Ç–æ–ª–±—Ü—ã –æ–±—ä—ë–º–∞ —Ç–æ—Ä–≥–æ–≤
- Color-coded (green/red)
- Correlation —Å —Ü–µ–Ω–æ–π

**Cumulative Volume:**
- –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –æ–±—ä—ë–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç total liquidity

---

### 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

**2.1. Moving Averages (–°–∫–æ–ª—å–∑—è—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ):**

**Simple Moving Average (SMA):**
```
SMA(7) = (Price‚ÇÅ + Price‚ÇÇ + ... + Price‚Çá) / 7
```

**Exponential Moving Average (EMA):**
```
EMA = Price √ó (2/(n+1)) + EMA_prev √ó (1 - 2/(n+1))
```

**Common periods:**
- MA(7) - –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π —Ç—Ä–µ–Ω–¥
- MA(30) - —Å—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–π
- MA(90) - –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π

**Trading signals:**
- MA(7) crosses above MA(30) ‚Üí BUY signal
- MA(7) crosses below MA(30) ‚Üí SELL signal

**2.2. RSI (Relative Strength Index):**

**Formula:**
```
RSI = 100 - (100 / (1 + RS))
RS = Average Gain / Average Loss (14 periods)
```

**Interpretation:**
- RSI > 70 ‚Üí Overbought (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è)
- RSI < 30 ‚Üí Oversold (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–æ—Å—Ç–∞)
- RSI = 50 ‚Üí Neutral

**2.3. MACD (Moving Average Convergence Divergence):**

**Components:**
```
MACD Line = EMA(12) - EMA(26)
Signal Line = EMA(9) of MACD Line
Histogram = MACD Line - Signal Line
```

**Trading signals:**
- MACD crosses above Signal ‚Üí BUY
- MACD crosses below Signal ‚Üí SELL

**2.4. Bollinger Bands:**

**Formula:**
```
Middle Band = SMA(20)
Upper Band = SMA(20) + (2 √ó StdDev)
Lower Band = SMA(20) - (2 √ó StdDev)
```

**Interpretation:**
- Price touches upper band ‚Üí overbought
- Price touches lower band ‚Üí oversold
- Bands narrow ‚Üí low volatility (breakout coming)
- Bands widen ‚Üí high volatility

---

### 3. Market Sentiment Analysis

**3.1. Bull/Bear Indicator:**

**Metrics:**
```
Bull Power = % of stocks above MA(30)
Bear Power = % of stocks below MA(30)

> 70% ‚Üí Strong Bull Market
50-70% ‚Üí Bullish
30-50% ‚Üí Bearish  
< 30% ‚Üí Strong Bear Market
```

**3.2. Fear & Greed Index:**

**Components:**
- Price momentum (25%)
- Stock price strength (25%)
- Stock price breadth (25%)
- Put/Call ratio (12.5%)
- Market volatility (12.5%)

**Scale:**
- 0-25: Extreme Fear ‚Üí BUY opportunity
- 25-45: Fear
- 45-55: Neutral
- 55-75: Greed
- 75-100: Extreme Greed ‚Üí SELL opportunity

---

### 4. Heat Maps

**4.1. Market Heat Map:**

**Visualization:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë MARKET HEAT MAP - 2077-12-15          ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë Sector        | Performance | Color    ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï™‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï™‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë Technology    | +8.5%       | üü© Green ‚ïë
‚ïë Defense       | +3.2%       | üü© Green ‚ïë
‚ïë Finance       | +1.1%       | üü© Green ‚ïë
‚ïë Healthcare    | -0.5%       | üü• Red   ‚ïë
‚ïë Manufacturing | -2.3%       | üü• Red   ‚ïë
‚ïë Energy        | -5.8%       | üü• Red   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

**4.2. Portfolio Heat Map:**

**Visualization:**
- Assets –ø–æ —Ä–∞–∑–º–µ—Ä—É –∏ performance
- Larger boxes = bigger allocation
- Color = performance (green/red)

---

### 5. Portfolio Analytics

**5.1. Performance Metrics:**

**Total Return:**
```
Total Return = ((Current Value - Initial Investment) / Initial Investment) √ó 100%
```

**Annualized Return:**
```
Annualized Return = ((1 + Total Return)^(365/Days)) - 1) √ó 100%
```

**Sharpe Ratio (risk-adjusted return):**
```
Sharpe Ratio = (Portfolio Return - Risk-Free Rate) / Portfolio Volatility
> 1.0 = Good
> 2.0 = Excellent
```

**5.2. Risk Metrics:**

**Portfolio Volatility:**
```
Volatility = StdDev of daily returns √ó ‚àö365
```

**Maximum Drawdown:**
```
Max Drawdown = (Trough Value - Peak Value) / Peak Value √ó 100%
```

**Beta (market correlation):**
```
Beta = Covariance(Portfolio, Market) / Variance(Market)
Œ≤ = 1.0: moves with market
Œ≤ > 1.0: more volatile than market
Œ≤ < 1.0: less volatile
```

---

### 6. Trade History Analysis

**6.1. Trade Statistics:**

**Win Rate:**
```
Win Rate = (Profitable Trades / Total Trades) √ó 100%
```

**Profit Factor:**
```
Profit Factor = Gross Profit / Gross Loss
> 1.5 = Good
> 2.0 = Excellent
```

**Average Trade:**
```
Avg Win = Total Profit / Number of Wins
Avg Loss = Total Loss / Number of Losses
R:R Ratio = Avg Win / Avg Loss
```

**6.2. Performance over time:**

**Monthly Returns:**
```
Month      | Return | Cumulative
-----------|--------|------------
Jan 2077   | +5%    | +5%
Feb 2077   | +3%    | +8.15%
Mar 2077   | -2%    | +6.00%
...
```

---

### 7. Alerts and Notifications

**7.1. Price Alerts:**

**Types:**
- Price reaches target (e.g., ARSK > 1600)
- Price drops below threshold (e.g., MILT < 1100)
- Percentage change (e.g., BIOT +10% in 24h)

**7.2. Event Alerts:**

**Economic events:**
- New economic crisis started
- Embargo announced
- Corporate scandal breaking

**Portfolio alerts:**
- Portfolio down 10%
- Individual position down 20%
- Margin call warning

---

### 8. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

**8.1. –¢–∞–±–ª–∏—Ü–∞: player_analytics_settings**
```sql
CREATE TABLE player_analytics_settings (
    player_id BIGINT PRIMARY KEY,
    default_timeframe VARCHAR(10) DEFAULT '7d',
    favorite_indicators JSONB,
    price_alerts JSONB,
    event_subscriptions JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

### 9. API Endpoints

**9.1. REST API:**

**GET /api/v1/analytics/chart/:asset**
- –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
- Params: timeframe, indicators

**GET /api/v1/analytics/portfolio/:playerId**
- Analytics –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏–≥—Ä–æ–∫–∞
- Response: metrics, performance, risks

**POST /api/v1/analytics/alerts/create**
- –°–æ–∑–¥–∞—Ç—å price alert
- Body: asset, condition, threshold

**GET /api/v1/analytics/market/heatmap**
- Market heat map –¥–∞–Ω–Ω—ã–µ
- Params: sector, timeframe

---

### 10. TODO –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏

**–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
- [ ] AI-powered predictions
- [ ] Social sentiment analysis
- [ ] Automated trading signals

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- v1.0.0 (2025-11-06 22:23) - –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
  - 4 —Ç–∏–ø–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (line, candlestick, OHLC, area)
  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (MA, RSI, MACD, Bollinger Bands)
  - Market sentiment analysis
  - Heat maps (market, portfolio)
  - Portfolio analytics (return, risk metrics)
  - Trade history analysis
  - Alerts and notifications
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (1 —Ç–∞–±–ª–∏—Ü–∞)
  - API endpoints (4 REST)


# Система отношений и репутации — детальная версия

**Статус:** draft  \
**Версия:** 0.1.0  \
**Дата создания:** 2025-11-07  \
**Последнее обновление:** 2025-11-07  \
**Приоритет:** высокий

**api-readiness:** needs-work  \
**api-readiness-check-date:** 2025-11-07 20:42  \
**api-readiness-notes:** Детализированы уровни отношений, доверия, договоров и дипломатии. Требуется баланс и согласование с экономикой/комбат-системой перед постановкой API задач.

---

## 1. Методика детализации

- **Шкалы:** указаны ступени и триггеры переходов (репутация, доверие, рейтинги).
- **Визуализация:** описаны UI-интерфейсы, цветовые кодировки, уведомления.
- **События:** для каждого уровня — разблокируемые миссии, бонусы, санкции.
- **Микросервисы:** `social-service` (отношения, доверие, союзные договоры), `economy-service` (контракты, торговля), `world-service` (события, последствия), `gameplay-service` (боевые операции).
- **Логи:** история взаимодействий, арбитраж, аудит.
- **Влияние:** связка с фракциями, кланами, городами, социальными объектами.

---

## 2. Отношения между игроками — расширенные уровни

### 2.1 Friends / Allies / Pact

- **Friends:** доступ к статусу, быстрым сообщениям, совместным операциям. UI: зеленая рамка, индикатор онлайн.
- **Close Allies:** расширенный доступ к ресурсам, дележ репутации, совместные квесты. Требования: высокий trust, успешные операции.
- **Pact (Клятва):** сочетание союза и доверия, общие цели, предупреждения при угрозах. UI: золотая рамка, совместный символ.

### 2.2 Enemies / Nemesis

- **Enemies:** красная рамка, предупреждения, история конфликтов.
- **Nemesis:** автоматические уведомления, точечные награды за победу/защиту, доступ к PvP-квестам.
- **Арбитраж:** возможность подачи жалоб (`social-service`) на нечестное поведение, лог смен репутации.

---

## 3. Репутация (Player ↔ Player, Clan, Faction)

### 3.1 Шкала и триггеры

- **Сегменты:** Hostile (-100..-50), Unfriendly (-50..-10), Neutral (-10..+10), Friendly (+10..+50), Ally (+50..+100).
- **UI:** цвет индикатора (красный, оранжевый, серый, синий, золотой), всплывающее сообщение при переходе сегмента.
- **Триггеры:** совместные миссии, торговля, предательство, спасение, участие в событиях.

### 3.2 Эффекты

- **Hostile:** NPC атакуют, запрет торговли, блокировка зон.
- **Unfriendly:** повышенные цены, проверки, ограниченный доступ.
- **Neutral:** стандартные условия.
- **Friendly:** скидки, дополнительные квесты, доступ к базам.
- **Ally:** эксклюзивные контракты, совместные базы, оповещения.

### 3.3 Репутация в цепочке (Player ↔ Clan ↔ Faction ↔ City)

- **Player-Clan:** доступ к рангу, голосованию, ресурсам.
- **Clan-Faction:** влияние на налоги, события, территорию.
- **Faction-Faction:** дипломатические статусы (союз, нейтралитет, конкуренция, война).
- **City Effects:** цвет подсветки кварталов, бонусы/штрафы, доступ к объектам.

---

## 4. Доверие (Trust) — детальные уровни

### 4.1 Шкала

- **0-20: нет доверия** — запрет на ценные сделки, предоплата, флаги риска.
- **21-40: низкое** — базовые контракты, повышенная комиссия.
- **41-60: умеренное** — расширенные сделки, возможность кредитов.
- **61-80: высокое** — доступ к закрытым ресурсам, совместные базы.
- **81-100: полное** — общие хранилища, доступ к секретным квестам, доверительные операции.

### 4.2 Механика набора

- **Положительное:** успешные контракты, время в союзе, PvE защита, совместные бизнесы.
- **Отрицательное:** предательство, штрафы, нарушение договоров, жалобы.
- **UI:** прогресс-бар, всплывающие уведомления, индикация событий.

### 4.3 Договор доверия

- **Виды:** торговый, боевой, стратегический (управление кланом).
- **Опции:** лимит доступа к складу, доля прибыли, условия выхода.
- **Арбитраж:** жалобы на нарушение, штрафы, репутационные удары.

---

## 5. Союзы и договоры

### 5.1 Типы союзов

- **Combat Alliance:** совместные операции, доступ к боевым базам, общие сигналы тревоги.
- **Trade Alliance:** совместные логистические миссии, скидки, общие контракты.
- **Clan Alliance:** объединение кланов, общие ресурсы, голосование.
- **Faction Support:** коллективная поддержка фракции, бонусы.

### 5.2 Процесс создания союза

- **Инициатор → приглашение → условия → подтверждение → публикация**.
- **UI:** панель союза, история договоров, таймеры продления.
- **Нарушение:** штраф репутации, прекращение, арбитраж.

---

## 6. Рейтинги и социальный капитал

- **Overall:** интегрирует все факторы, влияет на доступ к элитным миссиям.
- **Combat:** PvP, рейды, эскорт.
- **Trade:** экономическая эффективность, логистика.
- **Reliability:** выполнение контрактов, отсутствие жалоб.
- **Social Influence:** участие в событиях, медиапокрытие, квесты.
- **UI:** вкладки рейтинга, медали, сезонные трофеи.
- **Награды:** кастомизация, доступ к особым NPC, позывные.

---

## 7. История взаимодействий и арбитраж

- **Записи:** контракты, торговля, боевые операции, квесты, предательства.
- **Фильтры:** по типу, дате, участникам, результатам.
- **Отзывы:** игроки оставляют фидбэк (баллы + текст).
- **Арбитраж:** `social-service` получает жалобы, применяет санкции.

---

## 8. Взаимодействие с фракциями и городами

- **Фракции:** доступ к эксклюзивам, влияние на территории, участие в политике.
- **Города:** репутация влияет на цены, доступ к хабам, безопасность.
- **Ежедневные обновления:** сводки по фракциям, предупреждения о войнах, ивенты.
- **Интеграция:** `factions-overview-детально.md`, `visual-style-locations-детально.md`.

---

## 9. Использование документа

- Применять при подготовке API спецификаций для отношений и доверия.
- Использовать как базу для UI-описаний, сценариев квестов, социальных хабов.
- Связывать с экономикой, логистикой, боевыми операциями и системой фракций.
- При создании пользовательских контрактов и союзов использовать описанные шаблоны.



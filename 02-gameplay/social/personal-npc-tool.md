# Инструмент персональных NPC — Каркас

**Статус:** draft  
**Версия:** 0.1.0  
**Дата создания:** 2025-11-03  
**Приоритет:** высокий

**api-readiness:** needs-work  
**api-readiness-check-date:** 2025-11-03  
**api-readiness-notes:** Каркас требований без спецификации API. Нужны сущности, события, контракты и модели прав.

---

## Цель

Дать игрокам/кланам инструмент конфигурации персональных NPC, способных выполнять поручения в экономике/социальных/боевых сценариях, с безопасностью, аудитом и рыночной экосистемой сценариев.

## Область

- Принадлежность: личные, клановые/организационные NPC; перенос по контрактам
- Роли: базовые/средние/расширенные (открываются по прогрессу/репутации)
- Автоматизация: ручные поручения, шаблоны, правила/триггеры (расписания/KPI)
- Экономика: модели затрат по типу NPC (человек vs робот/андроид)
- Качество/ранг: рост от опыта/репутации; специализации/перки
- Безопасность: лимиты, лицензии/допуски, логи/аудит, анти-абуз
- Интеграции: economy/social/combat

## Ключевые сущности (черновик)

- Owner (Player/Clan/Org) — владелец NPC
- PersonalNPC — объект NPC с типом, рангом, специализациями
- RoleSet — доступные роли (охрана, курьер, торговец, информатор, инженер, медик, дипломат, фиксер, квестодатель и т.д.)
- ScenarioBlueprint — «блупринт» сценария (набор шагов/правил)
- ScenarioInstance — запущенный сценарий (параметры, KPI, временные окна)
- Contract — контракт владения/лизинга/переноса NPC между слоями
- License/Certificate — допуски и ограничения
- Ledger/AuditLog — аудит действий/изменений

## Потоки

1) Конфигурация NPC → назначение ролей → выбор сценария (ручной/шаблон/правила) → запуск → мониторинг KPI → награды/издержки
2) Маркетплейс сценариев → покупка/продажа ScenarioBlueprint → инсталляция → локальная настройка
3) Передача NPC по Contract между Owner-слоями (личный ↔ клан/организация)

## Правила владения/переноса (черновик)

- Иерархия прав на NPC (владение, делегирование, администрирование, запуск сценариев)
- Контракты переноса: срок, встречные обязательства, штрафы за нарушение
- Аудит всех операций; влияние репутации на лимиты/допуски

## Экономика содержания (черновик)

- Human-type NPC: базовые расходы (оплата/питание/быт), бонусы, страхование
- Robot/Android: лицензии/обновления ПО, техобслуживание, энергия/запчасти
- Модель выбирает владелец/фракция; поддержка гибридных схем

## Безопасность

- Лимиты по количеству NPC/сценариев/конкурирующих задач
- Лицензии/сертификаты на роли/зоны/типы задач
- Логи/аудит, связывается с репутацией владельца/фракции

## Интеграции

- Economy: магазины, логистика, страхование, тендеры
- Social: дипломатия, контракты, репутация, фракции
- Combat: охрана/эскорт, риск, взаимодействие с ИИ врагов

## TODO (следующие шаги)

- Формализовать модели данных: PersonalNPC, ScenarioBlueprint, Contract, License
- Описать события/сигналы: запуск/остановка, нарушение условий, KPI-достижения
- Прописать матрицу прав и лимитов (по уровням лицензий/репутации)
- Специфицировать API (соц/эко/бой интеграции)

## Связанные документы

- `03-lore/characters/characters-overview.md`
- `02-gameplay/economy/*`, `02-gameplay/social/*`, `02-gameplay/combat/*`

## История изменений

- v0.1.0 (2025-11-03) — создан каркас инструмента


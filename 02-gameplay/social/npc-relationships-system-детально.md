# Система отношений с NPC — детальная версия

**Статус:** draft  \
**Версия:** 0.1.0  \
**Дата создания:** 2025-11-07  \
**Последнее обновление:** 2025-11-07  \
**Приоритет:** высокий

**api-readiness:** needs-work  \
**api-readiness-check-date:** 2025-11-07 20:45  \
**api-readiness-notes:** Детализированы уровни отношений с NPC, влияния классов, фракций и процессов. Требуются баланс, UX и валидация сценариев перед постановкой API задач.

---

## 1. Методика детализации

- **Слои:** уровень симпатий, репутация, эмоции, доверие, сюжетные события.
- **Типы NPC:** сюжетные, функциональные, романтические, наёмные, социальные лидеры, антагонисты.
- **Модули:** `social-service` (отношения), `world-service` (события и реакция мира), `gameplay-service` (миссии), `character-service` (биографии и статусы NPC).
- **Интерфейсы:** карточки NPC, журнал отношений, индикаторы эмоций, всплывающие уведомления.
- **События:** реплики, изменение поведения, открытие квестов, бонусы и штрафы.

---

## 2. Типы NPC и уровни важности

- **Core Story NPC:** сюжетные фигуры, влияют на главный нарратив.
- **Functional NPC:** торговцы, тренеры, мастера имплантов.
- **Romance NPC:** высокий уровень сложности, моральные и репутационные требования.
- **Hireable NPC:** кандидаты в персонал (боевые, экономические, социальные роли).
- **Social Leaders:** главы кланов, политические лидеры, медиа-фигуры.
- **Antagonist NPC:** враги, с которыми возможно перейти из вражды в союз и обратно.

Каждый тип имеет собственные пороги отношений, эмоциональные триггеры и последствия.

---

## 3. Уровни отношений с NPC

### 3.1 Ступени базового отношения

- **-100..-51: Ненависть** — NPC атакуют, саботируют, нанимают охотников.
- **-50..-11: Неприязнь** — холодное поведение, отказ в услугах, угрозы, повышенные цены.
- **-10..+10: Нейтралитет** — стандартное взаимодействие, базовые реплики.
- **+11..+50: Дружба** — скидки, индивидуальные квесты, доступны совместные действия.
- **+51..+100: Союз/Партнёрство** — совместные операции, доступ к ресурсам NPC, поддержка в кризисах.

### 3.2 Эмоциональные слои

- **Доверие (Trust NPC):** влияет на доступ к тайнам, совместным миссиям, безопасности.
- **Эмоции (Mood):** отображает текущее состояние NPC (радость, тревога, гнев, печаль, интерес). Определяет реплики, эмодзи, реакции.
- **Лояльность (Loyalty):** долгое взаимодействие, влияет на готовность NPC рисковать.

### 3.3 Романтическая шкала

- **Interest:** NPC проявляет интерес, открываются личные квесты.
- **Affection:** доступ к доверительным диалогам, небольшие бонусы.
- **Commitment:** серьёзные отношения, совместные истории, доступ к особым миссиям.
- **Bond:** высокий уровень — NPC готов жертвовать, предоставлять эксклюзивы.

Романтика требует поведения (репутация, решения, классовые и фракционные требования, тайминг).

---

## 4. Влияние класса, фракции и происхождения

### 4.1 Классовые бонусы

- **NetRunner:** доступ к хакерским квестам NPC, бонус к доверию техно-персонажей.
- **Solo:** уважение боевых NPC, скидки на оружие.
- **Techie:** дополнительные диалоги с инженерами, ускоренный найм.
- **Face:** бонус к социальным тестам, большая эмпатия, штраф за предательство.
- **Nomad:** усиленное доверие у клановых NPC, бонусы в Badlands.

### 4.2 Фракционное влияние

- **Корпорации:** NPC союзники корпораций дают бонусы, противники — штрафы. Смена фракции = изменение отношений.
- **Банды:** высокий уровень уличных NPC зависит от выбора игрока.
- **Организации:** синхронизация с `factions-overview-детально.md`.

### 4.3 Происхождение персонажа

- **Аркология, улицы, номадские степи** — определяют стартовые отношения, диалоги, скрытые квесты.

---

## 5. Механики роста/падения отношений

- **Квесты:** основное влияние (плюс/минус). Некоторые квесты меняют отношение навсегда.
- **Подарки:** разный эффект в зависимости от вкусов NPC (каталог предметов).
- **Свободное время:** использование социальных хабов, посещение мероприятий, романтические сцены.
- **Предательство:** резкое снижение, вводится cooldown на восстановление.
- **Ивенты:** события в мире (войны, кризисы) меняют отношение NPC глобально.

---

## 6. Специальные типы отношений

- **Наставничество:** NPC выступает наставником, открывая навыки и навыковые квесты.
- **Гильдейские связи:** NPC как контакт для фракций.
- **Семейные связи:** родственные NPC, доступ к семейным квестам.
- **Деловые связи:** торговые соглашения, проценты, совместные предприятия.
- **Скрытые связи:** отношения необходимо раскрыть (разгадать тайну, выполнить условия).

---

## 7. Игроки как NPC

- **Персонажи игроков могут выполнять роли NPC** (квестодатели, торговцы, фиксеров).
- **Поддержка:** нужно наличие репутации, рейтинга и договоров.
- **Интерфейс:** карточка игрока-NPC отображает услуги, цены, репутацию.
- **Модерация:** `social-service` контролирует честность, `economy-service` — платежи.

---

## 8. Найм NPC и персональный состав

- **Уровни найма:** базовый, продвинутый, элитный.
- **Параметры:** ранг, специализация, расходы, доступное снаряжение.
- **Доверие:** высокий наём требует доверия и репутации.
- **Менеджмент:** связка с `npc-hiring-*` документами (экономика, лимиты, управление).

---

## 9. Влияние отношений на игровой мир

- **Города:** доступ к хабам, скидки, персональные приглашения.
- **Фракции:** изменение политической карты, влияние на войны.
- **События:** NPC приглашают на мероприятия, спасают игрока, передают секреты.
- **Экономика:** скидки, эксклюзивные товары, совместные бизнесы.
- **Комбат:** помощь NPC в боях, вызов подкреплений.

---

## 10. Журнал отношений и UX

- **Карточка NPC:** фото/голограмма, уровни, эмоции, история.
- **Таймлайн:** события взаимодействий, ключевые моменты, подарки.
- **Чеклист романтики:** условия, доступные сцены, последствия.
- **Напоминания:** уведомления о днях рождения, событиях, статусе.

---

## 11. История и арбитраж

- **Логи:** все изменения отношений фиксируются.
- **Арбитраж:** игрок может жаловаться на NPC или наоборот, влияет на доверие.
- **Публичность:** у некоторых NPC отношения публичны, у других — скрыты.

---

## 12. Использование документа

- Применять при создании API функций для отношений с NPC.
- Использовать как базу при разработке квестов, романтики, социальных хабов.
- Синхронизировать с `relationships-system-детально.md`, `visual-style-assets-детально.md`, `factions-overview-детально.md`.
- Подготовить UX/UI макеты на основе описанных уровней и индикаторов.


